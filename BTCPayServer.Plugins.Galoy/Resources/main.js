
(() => { var e, t, n, r = { 34505: (e, t, n) => { "use strict"; n.r(t) }, 40715: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }; Object.defineProperty(t, "__esModule", { value: !0 }), t.AuthProvider = void 0; var s = n(85893), l = n(67294), u = n(35800), c = n(158), d = n(69535), f = "galoy-session", h = function () { d.storage.delete(f) }; t.AuthProvider = function (e) { var t = e.children, n = e.galoyClient, v = e.authIdentity, m = (0, d.useAppDispatcher)(), p = i((0, l.useState)((function () { return function (e) { if (null == e ? void 0 : e.identity) return { identity: e.identity }; if (d.config.isBrowser) { var t = d.storage.get(f); if (t) return JSON.parse(t) } return null }({ identity: v }) })), 2), y = p[0], b = p[1], g = (0, l.useCallback)((function (e) { e ? function (e) { e ? d.storage.set(f, JSON.stringify(e)) : h() }(e) : h(), b(e) }), []), j = (0, l.useCallback)((function () { return a(void 0, void 0, void 0, (function () { var e; return o(this, (function (t) { switch (t.label) { case 0: return [4, d.ajax.post(d.config.authEndpoint)]; case 1: return (e = t.sent()) ? (g(e.identity ? e : null), m({ type: "kratos-login", authIdentity: e.identity }), [2, !0]) : [2, new Error("INVALID_AUTH_TOKEN_RESPONSE")] } })) })) }), [m, g]), x = (0, u.useErrorHandler)(), w = (0, l.useMemo)((function () { return n || (0, d.createClient)({ onError: function (e) { var t = e.graphQLErrors, n = e.networkError; n && n.message.includes("Failed to fetch") && fetch(d.config.galoyAuthEndpoint + "/clearCookies", { method: "GET", redirect: "follow", credentials: "include" }).then((function () { localStorage.clear(), sessionStorage.clear(), window.location.replace("/login") })), t && console.debug("[GraphQL errors]:", t), n && (console.debug("[Network error]:", n), x(n)) } }) }), [n, x]); return (0, s.jsx)(d.AuthContext.Provider, r({ value: { isAuthenticated: Boolean(null == y ? void 0 : y.identity), authIdentity: null == y ? void 0 : y.identity, setAuthSession: g, syncSession: j } }, { children: (0, s.jsx)(c.GaloyProvider, r({ client: w }, { children: t })) })) }, t.default = t.AuthProvider }, 11425: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(158), s = n(62338), l = a(n(66278)), u = a(n(85346)), c = n(69535), d = function () { c.history.push("/") }; t.default = function () { var e = (0, c.useAuthContext)().isAuthenticated, t = (0, u.default)().satsToUsd, n = (0, l.default)(), a = n.btcWalletBalance, f = n.usdWalletBalance, h = n.wallets; return (0, o.jsxs)("div", r({ className: "balance", onClick: d }, { children: [(0, o.jsx)("div", r({ className: "title" }, { children: (0, c.translate)("Current Balance") })), (0, o.jsx)("div", r({ className: "value" }, { children: e ? t ? 1 === h.length ? Number.isNaN(a) ? (0, o.jsx)(s.Spinner, {}) : (0, o.jsxs)(o.Fragment, { children: [(0, o.jsx)("div", r({ className: "primary" }, { children: (0, o.jsx)(s.SatFormat, { amount: a }) })), (0, o.jsxs)("div", r({ className: "secondary" }, { children: ["≈ ", (0, i.formatUsd)(t(a))] }))] }) : Number.isNaN(a) && Number.isNaN(f) ? (0, o.jsx)(s.Spinner, {}) : (0, o.jsx)("div", r({ className: "primary" }, { children: (0, i.formatUsd)(t(a) + f) })) : (0, o.jsx)(s.Spinner, {}) : (0, o.jsxs)(o.Fragment, { children: [(0, o.jsx)("div", r({ className: "primary" }, { children: (0, o.jsx)(s.SatFormat, { amount: 0 }) })), (0, o.jsx)("div", r({ className: "secondary" }, { children: (0, i.formatUsd)(0) }))] }) }))] })) } }, 65756: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var l = n(85893), u = n(67294), c = n(158), d = n(69535), f = s(n(85346)), h = s(n(80378)); t.default = function (e) { var t = e.conversionInput, n = e.navigateToNextStep, s = t.fromWallet, v = t.toWallet, m = t.satAmount, p = t.usdAmount, y = i((0, u.useState)(), 2), b = y[0], g = y[1], j = (0, f.default)().usdPerBtc, x = i(c.useMutation.intraLedgerPaymentSend(), 2), w = x[0], _ = x[1].loading, N = i(c.useMutation.intraLedgerUsdPaymentSend(), 2), S = N[0], O = N[1].loading, C = _ || O, P = "BTC" === s.currency ? m : p, A = "BTC" === v.currency ? m : p; return (0, l.jsxs)("div", r({ className: "conversion-flow" }, { children: [(0, l.jsx)("div", r({ className: "page-title" }, { children: (0, d.translate)("Review Conversion") })), (0, l.jsxs)("div", r({ className: "container" }, { children: [(0, l.jsxs)("div", r({ className: "review" }, { children: [(0, l.jsxs)("div", r({ className: "row" }, { children: [(0, l.jsx)("div", r({ className: "label" }, { children: (0, d.translate)("You're converting") })), (0, l.jsx)("div", r({ className: "value" }, { children: (0, c.formatCurrencyAmount)(P) }))] })), (0, l.jsxs)("div", r({ className: "row" }, { children: [(0, l.jsx)("div", r({ className: "label" }, { children: (0, d.translate)("To") })), (0, l.jsxs)("div", r({ className: "value" }, { children: ["~ ", (0, c.formatCurrencyAmount)(A)] }))] })), (0, l.jsxs)("div", r({ className: "row" }, { children: [(0, l.jsx)("div", r({ className: "label" }, { children: (0, d.translate)("Receiving Account") })), (0, l.jsx)("div", r({ className: "value" }, { children: "BTC" === v.currency ? (0, d.translate)("BTC Account") : (0, d.translate)("USD Account") }))] })), (0, l.jsxs)("div", r({ className: "row" }, { children: [(0, l.jsx)("div", r({ className: "label" }, { children: (0, d.translate)("Rate") })), (0, l.jsxs)("div", r({ className: "value" }, { children: ["~ ", (0, c.formatCurrencyAmount)({ currency: "USD", amount: null != j ? j : NaN }), " / 1 BTC"] }))] }))] })), b && (0, l.jsx)("div", { children: b }), (0, l.jsxs)("div", r({ className: "button-next" }, { children: [(0, l.jsx)("button", r({ disabled: C, onClick: function () { return a(void 0, void 0, void 0, (function () { var e, t, r, a, i, l, u, c, f, h; return o(this, (function (o) { switch (o.label) { case 0: if ("BTC" !== s.currency) return [3, 4]; o.label = 1; case 1: return o.trys.push([1, 3, , 4]), [4, w({ variables: { input: { walletId: null == s ? void 0 : s.id, recipientWalletId: null == v ? void 0 : v.id, amount: Math.round(m.amount) } } })]; case 2: return e = o.sent(), i = e.data, l = e.errorsMessage, t = null == i ? void 0 : i.intraLedgerPaymentSend.status, n({ success: "SUCCESS" === t, errorsMessage: l }), [3, 4]; case 3: return r = o.sent(), g(null !== (f = r.message) && void 0 !== f ? f : (0, d.translate)("Something went wrong")), [3, 4]; case 4: if ("USD" !== s.currency) return [3, 8]; o.label = 5; case 5: return o.trys.push([5, 7, , 8]), [4, S({ variables: { input: { walletId: null == s ? void 0 : s.id, recipientWalletId: null == v ? void 0 : v.id, amount: 100 * p.amount } } })]; case 6: return a = o.sent(), i = a.data, l = a.errorsMessage, u = null == i ? void 0 : i.intraLedgerUsdPaymentSend.status, n({ success: "SUCCESS" === u, errorsMessage: l }), [3, 8]; case 7: return c = o.sent(), g(null !== (h = c.message) && void 0 !== h ? h : (0, d.translate)("Something went wrong")), [3, 8]; case 8: return [2] } })) })) } }, { children: (0, d.translate)("Convert") })), (0, l.jsx)(h.default, r({ to: "/" }, { children: (0, d.translate)("Cancel") }))] }))] }))] })) } }, 99381: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var i = n(85893), s = n(67294), l = n(158), u = n(62338), c = n(69535), d = o(n(66278)), f = o(n(85346)), h = o(n(21775)); t.default = function (e) { var t, n, o = e.navigateToNextStep, v = (0, d.default)(), m = v.wallets, p = v.defaultWalletId, y = v.usdWalletBalance, b = v.btcWalletBalance, g = a((0, s.useState)(), 2), j = g[0], x = g[1], w = a((0, s.useState)(), 2), _ = w[0], N = w[1], S = a((0, s.useState)({ id: 0, amount: 0, currency: "USD" }), 2), O = S[0], C = S[1], P = (0, f.default)(), A = P.satsToUsd, k = P.usdToSats, T = (0, s.useMemo)((function () { var e; return "BTC" === O.currency ? O : { amount: null !== (e = null == k ? void 0 : k(O.amount)) && void 0 !== e ? e : NaN, currency: "BTC" } }), [O, k]), M = (0, s.useMemo)((function () { var e; return "USD" === O.currency ? O : { amount: null !== (e = null == A ? void 0 : A(O.amount)) && void 0 !== e ? e : NaN, currency: "USD" } }), [O, A]), I = a((0, s.useState)(), 2), U = I[0], D = I[1]; (0, s.useEffect)((function () { var e = null == m ? void 0 : m.find((function (e) { return e.id === p })), t = null == m ? void 0 : m.find((function (e) { return e.id !== p })); t && x({ id: t.id, currency: t.walletCurrency }), e && N({ id: e.id, currency: e.walletCurrency }) }), [m, p, x, N]), (0, s.useEffect)((function () { j && ("BTC" === j.currency && (T.amount > b ? D((0, c.translate)("Amount exceeds balance of %{balance}", { balance: (0, l.formatSats)(b) })) : D(void 0)), "USD" === j.currency && (M.amount > y ? D((0, c.translate)("Amount exceeds balance of %{balance}", { balance: (0, l.formatUsd)(y) })) : D(void 0))) }), [T.amount, b, j, M.amount, y]); var E = (0, s.useCallback)((function () { C((function (e) { var t, n, r = "BTC" === e.currency ? "USD" : "BTC", a = 0; return "BTC" === e.currency && e.amount && (a = Math.round(null !== (t = null == A ? void 0 : A(e.amount)) && void 0 !== t ? t : NaN)), "USD" === e.currency && e.amount && (a = Math.round(null !== (n = null == k ? void 0 : k(100 * e.amount)) && void 0 !== n ? n : NaN) / 100), { id: e.id + 1, currency: r, amount: a } })) }), [A, k]), F = function (e) { j && ("BTC" === j.currency && C((function (t) { return { id: t.id + 1, currency: "BTC", amount: Math.floor(b * e / 100) } })), "USD" === j.currency && C((function (t) { return { id: t.id + 1, currency: "USD", amount: Math.floor(100 * y * e / 100) / 100 } }))) }; return j && _ ? (0, i.jsxs)("div", r({ className: "conversion-flow" }, { children: [(0, i.jsx)(h.default, { page: "conversion-flow" }), (0, i.jsx)("div", r({ className: "page-title" }, { children: (0, c.translate)("Convert") })), (0, i.jsxs)("div", r({ className: "container" }, { children: [(0, i.jsxs)("div", r({ className: "wallet-selector" }, { children: [(0, i.jsxs)("div", r({ className: "wallet from-wallet" }, { children: [(0, i.jsx)("div", r({ className: "label" }, { children: "From" })), "BTC" === j.currency ? (0, i.jsx)("div", r({ className: "icon-btc" }, { children: "BTC" })) : (0, i.jsx)("div", r({ className: "icon-usd" }, { children: "USD" })), (0, i.jsxs)("div", r({ className: "title-balance" }, { children: [(0, i.jsx)("div", r({ className: "title" }, { children: "BTC" === j.currency ? "Bitcoin Wallet" : "US Dollar Wallet" })), (0, i.jsx)("div", r({ className: "balance" }, { children: "BTC" === j.currency ? (0, i.jsxs)(i.Fragment, { children: [(0, l.formatUsd)(null !== (t = null == A ? void 0 : A(b)) && void 0 !== t ? t : NaN), " - ", (0, l.formatSats)(b)] }) : (0, l.formatUsd)(y) }))] }))] })), (0, i.jsxs)("div", r({ className: "divider" }, { children: [(0, i.jsx)("hr", { className: "left" }), (0, i.jsx)("div", r({ className: "icon", onClick: function () { return D(void 0), C((function (e) { return { id: e.id + 1, amount: 0, currency: "USD" } })), x(_), void N(j) } }, { children: (0, i.jsx)(u.Icon, { name: "transfer" }) })), (0, i.jsx)("hr", { className: "right" })] })), (0, i.jsxs)("div", r({ className: "wallet to-wallet" }, { children: [(0, i.jsx)("div", r({ className: "label" }, { children: "To" })), "BTC" === _.currency ? (0, i.jsx)("div", r({ className: "icon-btc" }, { children: "BTC" })) : (0, i.jsx)("div", r({ className: "icon-usd" }, { children: "USD" })), (0, i.jsxs)("div", r({ className: "title-balance" }, { children: [(0, i.jsx)("div", r({ className: "title" }, { children: "BTC" === _.currency ? "Bitcoin Wallet" : "US Dollar Wallet" })), (0, i.jsx)("div", r({ className: "balance" }, { children: "BTC" === _.currency ? (0, i.jsxs)(i.Fragment, { children: [(0, l.formatUsd)(null !== (n = null == A ? void 0 : A(b)) && void 0 !== n ? n : NaN), " - ", (0, l.formatSats)(b)] }) : (0, l.formatUsd)(y) }))] }))] }))] })), (0, i.jsx)("div", r({ className: "amount-input" }, { children: (0, i.jsxs)("div", r({ className: "container" }, { children: [(0, i.jsx)("div", r({ className: "label" }, { children: "Amount" })), (0, i.jsxs)("div", r({ className: "content" }, { children: [(0, i.jsxs)("div", r({ className: "input" }, { children: [(0, i.jsx)("div", r({ className: "currency-label" }, { children: "BTC" === O.currency ? (0, i.jsx)(u.Icon, { name: "sat" }) : "$" })), (0, i.jsx)(u.FormattedNumberInput, { initValue: O.amount, onChange: function (e) { C((function (t) { return { id: t.id, currency: t.currency, amount: Number(e) } })) }, disabled: !1, autoComplete: "off", placeholder: (0, c.translate)("Amount to convert in %{currency}", { currency: O.currency }) }, O.id), "BTC" === j.currency && (0, i.jsx)("div", r({ className: "toggle-currency link", onClick: E }, { children: "⇅" }))] })), (0, i.jsx)("div", r({ className: "converted-input" }, { children: "BTC" === O.currency ? (0, l.formatUsd)(M.amount) : (0, l.formatSats)(T.amount) }))] }))] })) })), (0, i.jsxs)("div", r({ className: "percentages" }, { children: [(0, i.jsx)("div", { children: "% to convert" }), (0, i.jsxs)("div", r({ className: "buttons" }, { children: [(0, i.jsx)("div", r({ className: "percentage", onClick: function () { return F(25) } }, { children: "25%" })), (0, i.jsx)("div", r({ className: "percentage", onClick: function () { return F(50) } }, { children: "50%" })), (0, i.jsx)("div", r({ className: "percentage", onClick: function () { return F(75) } }, { children: "75%" })), (0, i.jsx)("div", r({ className: "percentage", onClick: function () { return F(100) } }, { children: "100%" }))] }))] })), U && (0, i.jsx)("div", r({ className: "error" }, { children: U })), (0, i.jsx)("div", r({ className: "button-next" }, { children: (0, i.jsx)("button", r({ disabled: !(j && 0 !== O.amount && ("BTC" === j.currency && T.amount <= b || "USD" === j.currency && M.amount <= y)), onClick: function () { return o({ fromWallet: j, toWallet: _, satAmount: T, usdAmount: M }) } }, { children: "Next" })) }))] }))] })) : (0, i.jsx)(u.Spinner, { size: "big" }) } }, 47001: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(67294), s = n(62338), l = n(69535), u = a(n(66278)), c = a(n(80378)); t.default = function (e) { var t = e.success, n = e.errorsMessage, a = (0, u.default)().refetch; return (0, i.useEffect)((function () { a(); var e = setTimeout((function () { l.history.push("/") }), 3e3); return function () { return clearTimeout(e) } }), [a]), (0, o.jsxs)("div", r({ className: "conversion-status" }, { children: [t && !n ? (0, o.jsxs)(o.Fragment, { children: [(0, o.jsx)(s.SuccessCheckmark, {}), (0, o.jsx)("div", r({ className: "success" }, { children: (0, l.translate)("Conversion successful") }))] }) : (0, o.jsx)("div", r({ className: "error" }, { children: (0, l.translateUnknown)(null != n ? n : "Something went wrong") })), (0, o.jsx)("div", r({ className: "nav-back" }, { children: (0, o.jsx)(c.default, r({ to: "/" }, { children: (0, l.translate)("Home") })) }))] })) } }, 19352: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(67294), s = { emailVerified: (0, n(69535).translate)("Your email address has been verified") }; t.default = function (e) { var t = e.type, n = a((0, i.useState)(!0), 2), l = n[0], u = n[1]; return l ? (0, o.jsxs)("div", r({ className: "discardable-message" }, { children: [(0, o.jsx)("div", r({ className: "close link", onClick: function () { return u(!1) } }, { children: "X" })), (0, o.jsx)("div", r({ className: "message" }, { children: s[t] }))] })) : null } }, 58274: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }); var a = n(85893), o = n(69535); t.default = function (e) { var t = e.error, n = t instanceof Error ? t : new Error(t), i = n.message, s = n.stack; return (0, a.jsxs)("div", r({ className: "error-fallback", role: "alert" }, { children: [(0, a.jsx)("p", { children: (0, o.translate)("Sorry, we appear to be having issues loading the application data. If the problem persists, please contact support.") }), (0, a.jsx)("pre", r({ className: "error" }, { children: i })), (0, a.jsx)("a", r({ href: "mailto:".concat(o.config.supportEmail, "?subject=Web Wallet Problem: ").concat(i, "&body=%0D%0A%0D%0A%0D%0AProblem details: %0D%0A%0D%0A").concat(s) }, { children: (0, o.translate)("Email Support") })), (0, a.jsx)("div", r({ className: "separator" }, { children: "|" })), (0, a.jsx)("a", r({ href: "/" }, { children: (0, o.translate)("Reload Application") })), (0, a.jsx)("div", r({ className: "separator" }, { children: "|" })), (0, a.jsx)("a", r({ href: "/logout" }, { children: (0, o.translate)("Logout") }))] })) } }, 9507: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }); var a = n(85893), o = n(69535); t.default = function (e) { var t = e.message, n = void 0 === t ? "Not able to generate invoice." : t; return (0, a.jsxs)("div", r({ className: "error" }, { children: [(0, o.translateUnknown)(n), (0, a.jsx)("br", {}), (0, o.translate)("Please try again later.")] })) } }, 21775: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var i = n(85893), s = n(67294), l = n(69535), u = o(n(11425)), c = o(n(55556)), d = o(n(80378)), f = o(n(10401)), h = o(n(23334)), v = o(n(19352)), m = o(n(24218)), p = ["home"]; t.default = function (e) { var t = e.page, n = (0, l.useAuthContext)().isAuthenticated, o = (0, l.useAppState)().emailVerified, y = a((0, s.useState)(!1), 2), b = y[0], g = y[1], j = t && p.includes(t), x = "home" === t && o, w = "home" === t && n; return (0, i.jsxs)("div", r({ className: "header-container ".concat(t, "-header") }, { children: [(0, i.jsxs)("div", r({ className: "header" }, { children: [(0, i.jsx)(u.default, {}), (0, i.jsxs)("div", r({ className: "links" }, { children: ["home" !== t && (0, i.jsxs)(i.Fragment, { children: [(0, i.jsxs)(d.default, r({ to: "/" }, { children: [(0, i.jsx)(m.default, { name: "home" }), (0, i.jsx)("span", r({ className: "name" }, { children: (0, l.translate)("Home") }))] })), (0, i.jsx)("div", r({ className: "separator" }, { children: "|" }))] }), n ? (0, i.jsx)(h.default, {}) : (0, i.jsx)(f.default, {}), (0, i.jsx)("div", r({ className: "separator" }, { children: "|" })), (0, i.jsx)("div", r({ className: "menu-icon", onClick: function (e) { e.preventDefault(), g((function (e) { return !e })) } }, { children: (0, i.jsx)(m.default, { name: "menu" }) }))] }))] })), x && (0, i.jsx)(v.default, { type: "emailVerified" }), w && (0, i.jsx)(c.default, {}), j && (0, i.jsxs)("div", r({ className: "header-nav" }, { children: [(0, i.jsx)(d.default, r({ to: "/scan", className: "link scan" }, { children: (0, i.jsxs)("div", r({ className: "button-label" }, { children: [(0, i.jsx)(m.default, { name: "qrcode" }), (0, l.translate)("Scan QR code")] })) })), (0, i.jsx)(d.default, r({ to: "/send", className: "link send" }, { children: (0, i.jsxs)("div", r({ className: "button-label" }, { children: [(0, i.jsx)(m.default, { name: "send" }), (0, l.translate)("Send Bitcoin")] })) })), (0, i.jsx)(d.default, r({ to: "/receive", className: "link receive" }, { children: (0, i.jsxs)("div", r({ className: "button-label" }, { children: [(0, i.jsx)(m.default, { name: "receive" }), (0, l.translate)("Receive Bitcoin")] })) }))] })), b && (0, i.jsxs)("div", r({ className: "menu" }, { children: [(0, i.jsx)("div", r({ className: "close", onClick: function (e) { e.preventDefault(), g(!1) } }, { children: (0, i.jsx)(m.default, { name: "close" }) })), (0, i.jsxs)(d.default, r({ to: "/" }, { children: [(0, i.jsx)(m.default, { name: "home" }), (0, l.translate)("Home")] })), (0, i.jsxs)(d.default, r({ to: "/contacts" }, { children: [(0, i.jsx)(m.default, { name: "people" }), (0, l.translate)("Contacts")] })), (0, i.jsxs)(d.default, r({ to: "/settings" }, { children: [(0, i.jsx)(m.default, { name: "settings" }), (0, l.translate)("Settings")] })), n ? (0, i.jsx)(h.default, {}) : (0, i.jsx)(f.default, {})] }))] })) } }, 24218: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = n(85893), a = n(62338); t.default = function (e) { var t = e.name; return (0, r.jsx)(a.Icon, { name: t }) } }, 15523: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__rest || function (e, t) { var n = {}; for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]); if (null != e && "function" == typeof Object.getOwnPropertySymbols) { var a = 0; for (r = Object.getOwnPropertySymbols(e); a < r.length; a++)t.indexOf(r[a]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[a]) && (n[r[a]] = e[r[a]]) } return n }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893); t.default = function (e) { var t = e.helper, n = e.className, i = void 0 === n ? "button-container" : n, s = a(e, ["helper", "className"]); return (0, o.jsxs)("div", r({ className: i }, { children: [(0, o.jsx)("button", r({ className: "button" }, s)), t && (0, o.jsx)("span", r({ className: "button-helper" }, { children: t }))] })) } }, 74176: function (e, t, n) { "use strict"; var r, a = this && this.__extends || (r = function (e, t) { return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]) }, r(e, t) }, function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null"); function n() { this.constructor = e } r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) }), o = this && this.__assign || function () { return o = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, o.apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.Flow = void 0; var i = n(85893), s = n(67294), l = n(99833), u = n(69787), c = n(30699), d = function (e) { function t(t) { var n = e.call(this, t) || this; return n.initializeValues = function (e) { void 0 === e && (e = []); var t = {}; e.forEach((function (e) { if ((0, l.isUiNodeInputAttributes)(e.attributes)) { if ("button" === e.attributes.type || "submit" === e.attributes.type) return; t[e.attributes.name] = e.attributes.value } })), n.setState((function (e) { return o(o({}, e), { values: t }) })) }, n.filterNodes = function () { var e = n.props, t = e.flow, r = e.only; return t ? t.ui.nodes.filter((function (e) { var t = e.group; return !r || "default" === t || t === r })) : [] }, n.handleSubmit = function (e) { return e.stopPropagation(), e.preventDefault(), n.state.isLoading ? Promise.resolve() : (n.setState((function (e) { return o(o({}, e), { isLoading: !0 }) })), n.props.onSubmit(n.state.values).finally((function () { n.setState((function (e) { return o(o({}, e), { isLoading: !1 }) })) }))) }, n.state = { values: {}, isLoading: !1 }, n } return a(t, e), t.prototype.componentDidMount = function () { this.initializeValues(this.filterNodes()) }, t.prototype.componentDidUpdate = function (e) { e.flow !== this.props.flow && this.initializeValues(this.filterNodes()) }, t.prototype.render = function () { var e = this, t = this.props, n = t.hideGlobalMessages, r = t.flow, a = this.state, s = a.values, d = a.isLoading, f = this.filterNodes(); return r ? (0, i.jsxs)("form", o({ action: r.ui.action, method: r.ui.method, onSubmit: this.handleSubmit }, { children: [n ? null : (0, i.jsx)(u.Messages, { messages: r.ui.messages }), f.map((function (t, n) { var r = (0, l.getNodeId)(t); return (0, i.jsx)(c.Node, { disabled: d, node: t, value: s[r], dispatchSubmit: e.handleSubmit, setValue: function (n) { return new Promise((function (r) { e.setState((function (e) { var r; return o(o({}, e), { values: o(o({}, e.values), (r = {}, r[(0, l.getNodeId)(t)] = n, r)) }) }), r) })) } }, "".concat(r, "-").concat(n)) }))] })) : null }, t }(s.Component); t.Flow = d }, 69787: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.Messages = t.Message = void 0; var a = n(85893), o = n(69535), i = function (e) { return (0, o.translateUnknown)(e.text) }; t.Message = function (e) { var t = e.message; return (0, a.jsx)("div", r({ className: "".concat(t.type, "-message") }, { children: i(t) })) }, t.Messages = function (e) { var n = e.messages; return n ? (0, a.jsx)("div", r({ className: "form-messages" }, { children: n.map((function (e) { return (0, a.jsx)(t.Message, { message: e }, e.id) })) })) : null } }, 30699: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.Node = void 0; var r = n(85893), a = n(99833), o = n(40529), i = n(6212), s = n(18497), l = n(95077), u = n(83579); t.Node = function (e) { var t = e.node, n = e.value, c = e.setValue, d = e.disabled, f = e.dispatchSubmit; return (0, a.isUiNodeImageAttributes)(t.attributes) ? (0, r.jsx)(i.NodeImage, { node: t, attributes: t.attributes }) : (0, a.isUiNodeScriptAttributes)(t.attributes) ? (0, r.jsx)(l.NodeScript, { node: t, attributes: t.attributes }) : (0, a.isUiNodeTextAttributes)(t.attributes) ? (0, r.jsx)(u.NodeText, { node: t, attributes: t.attributes }) : (0, a.isUiNodeAnchorAttributes)(t.attributes) ? (0, r.jsx)(o.NodeAnchor, { node: t, attributes: t.attributes }) : (0, a.isUiNodeInputAttributes)(t.attributes) ? (0, r.jsx)(s.NodeInput, { dispatchSubmit: f, value: n, setValue: c, node: t, disabled: d, attributes: t.attributes }) : null } }, 40529: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.NodeAnchor = void 0; var a = n(85893), o = n(42638); t.NodeAnchor = function (e) { var t = e.attributes; return (0, a.jsx)(o.Button, r({ "data-testid": "node/anchor/".concat(t.id), onClick: function (e) { e.stopPropagation(), e.preventDefault(), window.location.href = t.href } }, { children: t.title.text })) } }, 6212: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.NodeImage = void 0; var r = n(85893); t.NodeImage = function (e) { var t, n = e.node, a = e.attributes; return (0, r.jsx)("img", { "data-testid": "node/image/".concat(a.id), src: a.src, alt: null === (t = n.meta.label) || void 0 === t ? void 0 : t.text }) } }, 18497: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.NodeInput = void 0; var a = n(85893), o = n(38377), i = n(30316), s = n(26701), l = n(9236), u = n(63001); t.NodeInput = function (e) { switch (e.attributes.type) { case "hidden": return (0, a.jsx)(l.NodeInputHidden, r({}, e)); case "checkbox": return (0, a.jsx)(i.NodeInputCheckbox, r({}, e)); case "button": return (0, a.jsx)(o.NodeInputButton, r({}, e)); case "submit": return (0, a.jsx)(u.NodeInputSubmit, r({}, e)) }return (0, a.jsx)(s.NodeInputDefault, r({}, e)) } }, 38377: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.NodeInputButton = void 0; var o = n(85893), i = n(99833), s = a(n(15523)); t.NodeInputButton = function (e) { var t = e.node, n = e.attributes, a = e.setValue, l = e.disabled, u = e.dispatchSubmit; return (0, o.jsx)(o.Fragment, { children: (0, o.jsx)(s.default, r({ name: n.name, onClick: function (e) { n.onclick && new Function(n.onclick)(), a(n.value).then((function () { return u(e) })) }, value: n.value || "", disabled: n.disabled || l }, { children: (0, i.getNodeLabel)(t) })) }) } }, 30316: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.NodeInputCheckbox = void 0; var r = n(85893), a = n(99833), o = n(42638); t.NodeInputCheckbox = function (e) { var t = e.node, n = e.attributes, i = e.setValue, s = e.disabled; return (0, r.jsx)(r.Fragment, { children: (0, r.jsx)(o.Checkbox, { name: n.name, defaultChecked: !0 === n.value, onChange: function (e) { return i(e.target.checked) }, disabled: n.disabled || s, label: (0, a.getNodeLabel)(t), state: t.messages.find((function (e) { return "error" === e.type })) ? "error" : void 0, subtitle: t.messages.map((function (e) { return e.text })).join("\n") }) }) } }, 26701: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.NodeInputDefault = void 0; var o = n(85893), i = a(n(84859)); t.NodeInputDefault = function (e) { var t, n = e.node, a = e.attributes, s = e.value, l = void 0 === s ? "" : s, u = e.setValue, c = e.disabled; return (0, o.jsx)(i.default, { title: null === (t = n.meta.label) || void 0 === t ? void 0 : t.text, onClick: function () { a.onclick && new Function(a.onclick)() }, onChange: function (e) { u(e.target.value) }, type: a.type, name: a.name, value: l, disabled: a.disabled || c, state: n.messages.find((function (e) { return "error" === e.type })) ? "error" : void 0, subtitle: (0, o.jsx)(o.Fragment, { children: n.messages.map((function (e, t) { var n = e.text, a = e.id; return (0, o.jsx)("span", r({ "data-testid": "ui/message/".concat(a) }, { children: n }), "".concat(a, "-").concat(t)) })) }) }) } }, 9236: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.NodeInputHidden = void 0; var r = n(85893); t.NodeInputHidden = function (e) { var t = e.attributes; return (0, r.jsx)("input", { type: t.type, name: t.name, value: t.value || "true" }) } }, 63001: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__rest || function (e, t) { var n = {}; for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]); if (null != e && "function" == typeof Object.getOwnPropertySymbols) { var a = 0; for (r = Object.getOwnPropertySymbols(e); a < r.length; a++)t.indexOf(r[a]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[a]) && (n[r[a]] = e[r[a]]) } return n }; Object.defineProperty(t, "__esModule", { value: !0 }), t.NodeInputSubmit = void 0; var o = n(85893), i = n(99833), s = function (e) { var t = e.helper, n = e.className, i = void 0 === n ? "button-container" : n, s = a(e, ["helper", "className"]); return (0, o.jsxs)("div", r({ className: i }, { children: [(0, o.jsx)("button", r({ className: "button" }, s)), t && (0, o.jsx)("span", r({ className: "button-helper" }, { children: t }))] })) }; t.NodeInputSubmit = function (e) { var t = e.node, n = e.attributes, a = e.setValue, l = e.disabled, u = e.dispatchSubmit; return (0, o.jsx)(o.Fragment, { children: (0, o.jsx)(s, r({ name: n.name, onClick: function (e) { a(n.value).then((function () { return u(e) })) }, value: n.value || "", disabled: n.disabled || l }, { children: (0, i.getNodeLabel)(t) })) }) } }, 95077: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.NodeScript = void 0; var r = n(67294); t.NodeScript = function (e) { var t = e.attributes; return (0, r.useEffect)((function () { var e = document.createElement("script"); return e.async = !0, e.setAttribute("data-testid", "node/script/".concat(t.id)), e.src = t.src, e.async = t.async, e.crossOrigin = t.crossorigin, e.integrity = t.integrity, e.referrerPolicy = t.referrerpolicy, e.type = t.type, document.body.appendChild(e), function () { document.body.removeChild(e) } }), [t]), null } }, 83579: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.NodeText = void 0; var a = n(85893), o = n(42638), i = function (e) { var t = e.attributes; if (1050015 === t.text.id) { var n = t.text.context.secrets.map((function (e, n) { return (0, a.jsx)("div", r({ "data-testid": "node/text/".concat(t.id, "/lookup_secret"), className: "col-xs-3" }, { children: (0, a.jsx)("code", { children: 1050014 === e.id ? "Used" : e.text }) }), n) })); return (0, a.jsx)("div", r({ className: "container-fluid", "data-testid": "node/text/".concat(t.id, "/text") }, { children: (0, a.jsx)("div", r({ className: "row" }, { children: n })) })) } return (0, a.jsx)("div", r({ "data-testid": "node/text/".concat(t.id, "/text") }, { children: (0, a.jsx)(o.CodeBox, { code: t.text.text }) })) }; t.NodeText = function (e) { var t, n, s = e.node, l = e.attributes; return (0, a.jsxs)(a.Fragment, { children: [(0, a.jsx)(o.P, r({ "data-testid": "node/text/".concat(l.id, "/label") }, { children: null === (n = null === (t = s.meta) || void 0 === t ? void 0 : t.label) || void 0 === n ? void 0 : n.text })), (0, a.jsx)(i, { node: s, attributes: l })] }) } }, 84859: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__rest || function (e, t) { var n = {}; for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]); if (null != e && "function" == typeof Object.getOwnPropertySymbols) { var a = 0; for (r = Object.getOwnPropertySymbols(e); a < r.length; a++)t.indexOf(r[a]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[a]) && (n[r[a]] = e[r[a]]) } return n }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893); t.default = function (e) { var t = e.className, n = void 0 === t ? "" : t, i = e.title, s = e.subtitle, l = e.type, u = void 0 === l ? "text" : l, c = a(e, ["className", "title", "subtitle", "type"]), d = c.state; return c.disabled && (d = "disabled"), (0, o.jsxs)("div", r({ className: "".concat(n, " input-container") }, { children: [i && (0, o.jsx)("div", r({ className: n }, { children: i })), (0, o.jsx)("input", r({}, c, { type: u, className: n })), s && (0, o.jsx)("div", r({ className: "".concat(n, " ").concat(d, "-state") }, { children: s }))] })) } }, 38735: function (e, t, n) { "use strict"; var r = this && this.__createBinding || (Object.create ? function (e, t, n, r) { void 0 === r && (r = n); var a = Object.getOwnPropertyDescriptor(t, n); a && !("get" in a ? !t.__esModule : a.writable || a.configurable) || (a = { enumerable: !0, get: function () { return t[n] } }), Object.defineProperty(e, r, a) } : function (e, t, n, r) { void 0 === r && (r = n), e[r] = t[n] }), a = this && this.__exportStar || function (e, t) { for (var n in e) "default" === n || Object.prototype.hasOwnProperty.call(t, n) || r(t, e, n) }; Object.defineProperty(t, "__esModule", { value: !0 }), a(n(74176), t), a(n(69787), t), a(n(30699), t), a(n(6212), t), a(n(18497), t), a(n(83579), t) }, 80378: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.ButtonLink = void 0; var a = n(85893), o = n(46570), i = n(69535), s = function (e) { (0, o.checkAuthRoute)(e) instanceof Error || !i.config.kratosFeatureFlag ? i.history.push(e) : window.location.href = e }; t.ButtonLink = function (e) { var t = e.to, n = e.className, o = e.children; return (0, a.jsx)("button", r({ onClick: function (e) { e.preventDefault(), s(t) }, className: n }, { children: o })) }, t.default = function (e) { var t = e.to, n = e.className, o = e.children; return (0, a.jsx)("a", r({ href: t, onClick: function (e) { e.ctrlKey || e.metaKey || e.preventDefault(), s(t) }, className: n }, { children: o })) } }, 10401: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(69535), s = a(n(80378)), l = a(n(24218)); t.default = function () { return (0, o.jsxs)(s.default, r({ to: "/login" }, { children: [(0, o.jsx)(l.default, { name: "login" }), (0, o.jsx)("span", r({ className: "name" }, { children: (0, i.translate)("Login") }))] })) } }, 39613: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var l = n(85893), u = n(67294), c = n(62338), d = n(69535), f = s(n(24218)); t.default = function (e) { var t = e.phoneNumber, n = i((0, u.useState)(!1), 2), s = n[0], h = n[1], v = i((0, u.useState)(""), 2), m = v[0], p = v[1], y = (0, d.useAuthContext)().setAuthSession, b = function (e) { return a(void 0, void 0, void 0, (function () { var n; return o(this, (function (r) { switch (r.label) { case 0: return h(!0), [4, d.ajax.post(d.config.galoyAuthEndpoint + "/login", { phoneNumber: t, authCode: e })]; case 1: return n = r.sent(), h(!1), y(n.identity ? { identity: n.identity } : null), d.history.push("/"), [2] } })) })) }; return (0, l.jsxs)("div", r({ className: "login" }, { children: [(0, l.jsx)("div", r({ className: "intro" }, { children: (0, d.translate)("To confirm your phone number, enter the code we just sent you on %{phoneNumber}", { phoneNumber: t }) })), (0, l.jsxs)("form", r({ className: "auth-code-form", onSubmit: function (e) { return a(void 0, void 0, void 0, (function () { return o(this, (function (t) { return e.preventDefault(), p(""), b(e.currentTarget.authCode.value), [2] })) })) } }, { children: [(0, l.jsx)("input", { type: "number", name: "authCode", className: "auth-code-input", autoFocus: !0, autoComplete: "off", pattern: "[0-9]{6}", onChange: function (e) { p(""), e.currentTarget.value.match(/^[0-9]{6}$/u) && b(e.currentTarget.value) } }), (0, l.jsx)("button", r({ type: "submit", disabled: s }, { children: s ? (0, l.jsx)(c.Spinner, { size: "small" }) : (0, l.jsx)(f.default, { name: "submit" }) }))] })), m && (0, l.jsx)("div", r({ className: "error" }, { children: m }))] })) } }, 89815: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.CaptchaChallenge = void 0; var l = n(85893), u = n(67294), c = n(158), d = n(62338), f = n(69535), h = s(n(39613)); t.CaptchaChallenge = (0, u.memo)((function (e) { var t = e.phoneNumber, n = i(c.useMutation.captchaCreateChallenge(), 2), s = n[0], v = n[1].loading, m = i(c.useMutation.captchaRequestAuthCode(), 2), p = m[0], y = m[1].loading, b = i((0, u.useState)({ status: "loading" }), 2), g = b[0], j = b[1], x = (0, u.useCallback)((function (e) { e.appendTo("#captcha"), e.onReady((function () { j({ status: "ready" }), e.verify() })).onSuccess((function () { return a(void 0, void 0, void 0, (function () { var n, r; return o(this, (function (a) { switch (a.label) { case 0: return n = e.getValidate(), [4, p({ variables: { input: { phone: t, challengeCode: n.geetest_challenge, validationCode: n.geetest_validate, secCode: n.geetest_seccode } } })]; case 1: return r = a.sent().errorsMessage, j({ status: r ? "error" : "success", errorsMessage: r }), [2] } })) })) })).onError((function (e) { console.debug("[Captcha error]:", e), j({ status: "error", errorsMessage: (0, f.translate)("Invalid verification. Please try again") }) })) }), [t, p]); if ((0, u.useEffect)((function () { a(void 0, void 0, void 0, (function () { var e, t, n, r, a, i, l, u, c; return o(this, (function (o) { switch (o.label) { case 0: return [4, s()]; case 1: return e = o.sent(), t = e.data, n = e.errorsMessage, r = null === (c = null == t ? void 0 : t.captchaCreateChallenge) || void 0 === c ? void 0 : c.result, !n && r && (a = r.id, i = r.challengeCode, l = r.newCaptcha, u = r.failbackMode, window.initGeetest({ gt: a, challenge: i, offline: u, new_captcha: l, lang: "en", product: "bind" }, x)), [2] } })) })) }), [x, s]), "success" === g.status) return (0, l.jsx)(h.default, { phoneNumber: t }); var w = "loading" === g.status || v || y, _ = !w && "error" === g.status; return (0, l.jsxs)("div", r({ className: "captcha-challenge" }, { children: [(0, l.jsx)("div", r({ className: "intro" }, { children: (0, f.translate)("Verify you are human") })), (0, l.jsx)("div", r({ id: "captcha" }, { children: w && (0, l.jsx)("div", r({ className: "loading" }, { children: (0, l.jsx)(d.Spinner, { size: "big" }) })) })), _ && (0, l.jsx)("div", r({ className: "error" }, { children: g.errorsMessage }))] })) })) }, 23334: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var s = n(85893), l = n(158), u = n(69535), c = i(n(24218)); t.default = function () { var e = (0, u.useAuthContext)().setAuthSession, t = (0, l.useResetClient)(); return (0, s.jsxs)("a", r({ href: "/logout", onClick: function (n) { return a(void 0, void 0, void 0, (function () { return o(this, (function (r) { return n.preventDefault(), u.ajax.get(u.config.galoyAuthEndpoint + "/logout").then((function () { t(), e(null), fetch(u.config.galoyAuthEndpoint + "/clearCookies", { method: "GET", redirect: "follow", credentials: "include" }), localStorage.clear(), window.location.href = "/logout" })), [2] })) })) } }, { children: [(0, s.jsx)(c.default, { name: "logout" }), (0, s.jsx)("span", r({ className: "name" }, { children: (0, u.translate)("Logout") }))] })) } }, 88459: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(158), s = n(62338), l = n(69535), u = a(n(9507)), c = a(n(21775)), d = a(n(24218)), f = function () { var e, t, n = i.useQuery.contacts(), a = n.loading, c = n.errorsMessage, f = n.data, h = function (e) { l.history.push("/send?to=".concat(e)) }; return (0, o.jsxs)("div", r({ className: "list" }, { children: [a && (0, o.jsx)(s.Spinner, { size: "big" }), c && (0, o.jsx)(u.default, { message: c }), 0 === (null === (e = null == f ? void 0 : f.me) || void 0 === e ? void 0 : e.contacts.length) && (0, o.jsx)("div", r({ className: "no-data" }, { children: (0, l.translate)("No Contacts") })), null === (t = null == f ? void 0 : f.me) || void 0 === t ? void 0 : t.contacts.map((function (e) { var t; return (0, o.jsxs)("div", r({ className: "contact" }, { children: [(0, o.jsx)(d.default, { name: "person" }), (0, o.jsx)("div", r({ className: "name", onClick: function () { return h(e.username) } }, { children: (0, i.truncatedDisplay)(null !== (t = e.alias) && void 0 !== t ? t : e.username) })), (0, o.jsxs)("div", r({ className: "actions" }, { children: [(0, o.jsx)("div", r({ title: (0, l.translate)("Transaction List"), onClick: function () { return t = e.username, void l.history.push("/transactions?username=".concat(t)); var t } }, { children: (0, o.jsx)(d.default, { name: "list" }) })), (0, o.jsx)("div", r({ title: (0, l.translate)("Send Bitcoin"), onClick: function () { return h(e.username) } }, { children: (0, o.jsx)(d.default, { name: "send" }) }))] }))] }), e.username) }))] })) }; t.default = function () { var e = (0, l.useAuthContext)().isAuthenticated; return (0, o.jsxs)("div", r({ className: "contacts" }, { children: [(0, o.jsx)(c.default, { page: "contacts" }), (0, o.jsx)("div", r({ className: "page-title" }, { children: (0, l.translate)("Contacts") })), e ? (0, o.jsx)(f, {}) : (0, o.jsx)("div", r({ className: "no-data" }, { children: (0, l.translate)("No Contacts") }))] })) } }, 10021: function (e, t, n) { "use strict"; var r = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(67294), s = a(n(99381)), l = a(n(65756)), u = a(n(47001)); t.default = function () { var e, t = r((0, i.useState)({ component: "input" }), 2), n = t[0], a = t[1]; switch (n.component) { case "input": return (0, o.jsx)(s.default, { navigateToNextStep: function (e) { return a({ component: "confirmation", data: e }) } }); case "confirmation": if (!n.data) throw new Error("Invalid data"); return (0, o.jsx)(l.default, { conversionInput: n.data, navigateToNextStep: function (e) { var t = e.success, n = e.errorsMessage; return a({ component: "status", success: t, errorsMessage: n }) } }); case "status": return (0, o.jsx)(u.default, { success: null !== (e = null == n ? void 0 : n.success) && void 0 !== e && e, errorsMessage: null == n ? void 0 : n.errorsMessage }) } } }, 65829: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(69535), s = a(n(21775)), l = a(n(84938)); t.default = function () { var e = (0, i.useAuthContext)().isAuthenticated; return (0, o.jsxs)(o.Fragment, { children: [(0, o.jsxs)("div", r({ className: "home" }, { children: [(0, o.jsx)(s.default, { page: "home" }), (0, o.jsx)("div", r({ className: "recent-transactions" }, { children: e && (0, o.jsxs)(o.Fragment, { children: [(0, o.jsx)("div", r({ className: "header" }, { children: (0, i.translate)("Recent Transactions") })), (0, o.jsx)(l.default, {})] }) }))] })), (0, o.jsx)("div", r({ id: "powered-by" }, { children: (0, o.jsxs)("div", r({ className: "content" }, { children: [(0, i.translate)("Powered By"), " ", (0, o.jsx)("a", r({ href: "https://galoy.io/", target: "_blank", rel: "noreferrer" }, { children: "Galoy" }))] })) }))] }) } }, 29112: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var l = n(85893), u = n(67294), c = n(35800), d = n(812), f = n(69535), h = s(n(80378)), v = n(38735), m = s(n(24218)); t.default = function (e) { var t, n = e.flowData, s = (0, c.useErrorHandler)(), p = (0, f.useAuthContext)().syncSession, y = i((0, u.useState)(null == n ? void 0 : n.loginData), 2), b = y[0], g = y[1], j = (0, u.useCallback)((function () { g(void 0), window.location.href = "/login" }), []); (0, u.useEffect)((function () { if (!b) { var e = (0, d.KratosSdk)(f.config.kratosBrowserUrl), t = new URLSearchParams(window.location.search), n = t.get("flow"), r = t.get("return_to"), a = t.get("refresh"), o = t.get("aal"); n ? e.getSelfServiceLoginFlow(String(n), void 0, { withCredentials: !0 }).then((function (e) { var t = e.data; g(t) })).catch((0, d.handleFlowError)({ history: f.history, resetFlow: j })) : e.initializeSelfServiceLoginFlowForBrowsers(Boolean(a), o ? String(o) : void 0, r ? String(r) : void 0).then((function (e) { var t = e.data; g(t) })).catch((0, d.handleFlowError)({ history: f.history, resetFlow: j })) } }), [b, j]); var x = (0, d.getNodesForFlow)(b); return (0, l.jsxs)(l.Fragment, { children: [(0, l.jsx)("div", r({ className: "login-form auth-form" }, { children: (0, l.jsxs)("form", r({ action: null == b ? void 0 : b.ui.action, method: "POST", onSubmit: function (e) { return a(void 0, void 0, void 0, (function () { return o(this, (function (t) { return e.stopPropagation(), e.preventDefault(), n = { method: "password", csrf_token: e.currentTarget.csrf_token.value, identifier: e.currentTarget.identifier.value, password: e.currentTarget.password.value }, a(void 0, void 0, void 0, (function () { return o(this, (function (e) { return (0, d.KratosSdk)(f.config.kratosBrowserUrl).submitSelfServiceLoginFlow(String(null == b ? void 0 : b.id), n, void 0, void 0, { withCredentials: !0 }).then((function () { return a(void 0, void 0, void 0, (function () { var e, t; return o(this, (function (n) { switch (n.label) { case 0: return n.trys.push([0, 2, , 3]), [4, p()]; case 1: return (e = n.sent()) instanceof Error ? (s(e), [2]) : (f.history.push("/"), [3, 3]); case 2: return t = n.sent(), console.error(t), [3, 3]; case 3: return [2] } })) })) })).catch((0, d.handleFlowError)({ history: f.history, resetFlow: j })).catch((function (e) { var t, n; if (400 !== (null === (t = e.response) || void 0 === t ? void 0 : t.status)) return Promise.reject(e); g(null === (n = e.response) || void 0 === n ? void 0 : n.data) })), [2] })) })), [2]; var n })) })) } }, { children: [(0, l.jsx)("input", { type: "hidden", name: "csrf_token", value: null == x ? void 0 : x.csrf_token.attributes.value }), (0, l.jsxs)("div", r({ className: "input-container" }, { children: [(0, l.jsx)("div", r({ className: "" }, { children: (0, f.translate)("Email") })), (0, l.jsx)("input", { name: "identifier", type: "email", defaultValue: null == x ? void 0 : x.identifier.attributes.value, autoComplete: "email", required: !0 }), (0, l.jsx)(v.Messages, { messages: null == x ? void 0 : x.identifier.messages })] })), (0, l.jsxs)("div", r({ className: "input-container" }, { children: [(0, l.jsx)("div", r({ className: "" }, { children: (0, f.translate)("Password") })), (0, l.jsx)("input", { name: "password", type: "password", autoComplete: "current-password", required: !0 }), (0, l.jsx)(v.Messages, { messages: null == x ? void 0 : x.password.messages })] })), (0, l.jsx)(v.Messages, { messages: null === (t = null == b ? void 0 : b.ui) || void 0 === t ? void 0 : t.messages }), (0, l.jsxs)("div", r({ className: "button-container" }, { children: [(0, l.jsx)("button", r({ className: "button", name: "method", value: "password" }, { children: (0, f.translate)("Login") })), (0, l.jsx)(h.default, r({ to: "/" }, { children: (0, f.translate)("Cancel") }))] }))] })) })), (0, l.jsxs)("div", r({ className: "form-links" }, { children: [(0, l.jsxs)(h.default, r({ to: "/register" }, { children: [(0, l.jsx)(m.default, { name: "login" }), (0, f.translate)("Create new account")] })), (0, l.jsx)("div", r({ className: "separator" }, { children: "|" })), (0, l.jsxs)(h.default, r({ to: "/recovery" }, { children: [(0, l.jsx)(m.default, { name: "key" }), (0, f.translate)("Recover your account")] }))] }))] }) } }, 6974: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(67294), s = n(69535), l = n(62338), u = n(89815); t.default = function () { var e = a((0, i.useState)(""), 2), t = e[0], n = e[1], c = a((0, i.useState)(""), 2), d = c[0], f = c[1], h = (0, i.useCallback)((function (e) { f((0, s.translate)(e)) }), []); return t ? (0, o.jsx)(u.CaptchaChallenge, { phoneNumber: t }) : (0, o.jsxs)("div", r({ className: "login" }, { children: [(0, o.jsx)("div", r({ className: "intro" }, { children: (0, s.translate)("Enter your phone number and we'll text you an access code") })), (0, o.jsx)(l.PhoneNumberInput, { onSuccess: n, onInvalidNumber: h }), d && (0, o.jsx)("div", r({ className: "error" }, { children: d }))] })) } }, 98807: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var i = n(85893), s = n(67294), l = n(69535), u = o(n(21775)), c = o(n(6729)), d = o(n(80030)), f = o(n(66278)), h = n(62338); t.default = function () { var e = (0, l.useAppDispatcher)(), t = (0, f.default)(), n = t.btcWallet, o = t.usdWallet, v = a((0, s.useState)({ view: "overview", layer: "lightning", currency: "USD", amount: 0, satAmount: 0, usdAmount: 0, memo: "", wallet: n }), 2), m = v[0], p = v[1]; return (0, i.jsxs)("div", r({ className: "receive" }, { children: [(0, i.jsx)(u.default, { page: "receive-bitcoin" }), (0, i.jsx)("div", r({ className: "page-title" }, { children: (0, l.translate)("Receive Bitcoin") })), "success" === m.view && (0, i.jsxs)("div", r({ className: "invoice-status" }, { children: [(0, i.jsx)(h.SuccessCheckmark, {}), (0, i.jsx)("button", r({ onClick: function () { e({ type: "navigate", path: "/receive" }) } }, { children: (0, l.translate)("Receive another payment") }))] })), "overview" === m.view && (0, i.jsx)(c.default, { input: m, setInput: p, toggleWallet: function () { p((function (e) { return r(r({}, e), { amount: 0, satAmount: 0, usdAmount: 0, memo: "", wallet: "BTC" === m.wallet.walletCurrency ? o : n, layer: "BTC" === m.wallet.walletCurrency && "onchain" === e.layer ? "lightning" : e.layer }) })) } }), "input" === m.view && (0, i.jsx)(d.default, { input: m, setInput: p })] })) } }, 78215: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var l = n(85893), u = n(67294), c = n(69535), d = n(812), f = n(38735), h = s(n(80378)); t.default = function (e) { var t, n = e.flowData, s = i((0, u.useState)(null == n ? void 0 : n.recoveryData), 2), v = s[0], m = s[1], p = (0, u.useCallback)((function () { m(void 0), window.location.href = "/recovery" }), []); (0, u.useEffect)((function () { if (!v) { var e = (0, d.KratosSdk)(c.config.kratosBrowserUrl), t = new URLSearchParams(window.location.search).get("flow"); t ? e.getSelfServiceRecoveryFlow(String(t)).then((function (e) { var t = e.data; m(t) })).catch((0, d.handleFlowError)({ history: c.history, resetFlow: p })) : e.initializeSelfServiceRecoveryFlowForBrowsers().then((function (e) { var t = e.data; m(t) })).catch((0, d.handleFlowError)({ history: c.history, resetFlow: p })) } }), [v, p]); var y = (0, d.getNodesForFlow)(v); return (0, l.jsx)("div", r({ className: "recovery-form auth-form" }, { children: (0, l.jsxs)("form", r({ action: null == v ? void 0 : v.ui.action, method: "POST", onSubmit: function (e) { return a(void 0, void 0, void 0, (function () { return o(this, (function (t) { return e.stopPropagation(), e.preventDefault(), n = { method: "link", csrf_token: e.currentTarget.csrf_token.value, email: e.currentTarget.email.value }, a(void 0, void 0, void 0, (function () { return o(this, (function (e) { return (0, d.KratosSdk)(c.config.kratosBrowserUrl).submitSelfServiceRecoveryFlow(String(null == v ? void 0 : v.id), n, void 0, void 0, { withCredentials: !0 }).then((function (e) { var t = e.data; m(t) })).catch((0, d.handleFlowError)({ history: c.history, resetFlow: p })).catch((function (e) { var t, n; if (400 !== (null === (t = e.response) || void 0 === t ? void 0 : t.status)) return Promise.reject(e); m(null === (n = e.response) || void 0 === n ? void 0 : n.data) })), [2] })) })), [2]; var n })) })) } }, { children: [(0, l.jsx)("input", { type: "hidden", name: "csrf_token", value: null == y ? void 0 : y.csrf_token.attributes.value }), (0, l.jsxs)("div", r({ className: "input-container" }, { children: [(0, l.jsx)("div", r({ className: "" }, { children: (0, c.translate)("Email") })), (0, l.jsx)("input", { name: "email", type: "email", autoComplete: "email", required: !0 }), (0, l.jsx)(f.Messages, { messages: null == y ? void 0 : y.email.messages })] })), (0, l.jsx)(f.Messages, { messages: null === (t = null == v ? void 0 : v.ui) || void 0 === t ? void 0 : t.messages }), (0, l.jsxs)("div", r({ className: "button-container" }, { children: [(0, l.jsx)("button", r({ className: "button", name: "method", value: "link" }, { children: (0, c.translate)("Recover Account") })), (0, l.jsx)(h.default, r({ to: "/" }, { children: (0, c.translate)("Cancel") }))] }))] })) })) } }, 21277: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var l = n(85893), u = n(67294), c = n(35800), d = n(69535), f = n(812), h = s(n(80378)), v = n(38735), m = s(n(24218)); t.default = function (e) { var t, n = e.flowData, s = (0, c.useErrorHandler)(), p = (0, d.useAuthContext)().syncSession, y = i((0, u.useState)(null == n ? void 0 : n.registrationData), 2), b = y[0], g = y[1], j = (0, u.useCallback)((function () { g(void 0), window.location.href = "/register" }), []); (0, u.useEffect)((function () { if (!b) { var e = (0, f.KratosSdk)(d.config.kratosBrowserUrl), t = new URLSearchParams(window.location.search), n = t.get("flow"); n ? e.getSelfServiceRegistrationFlow(String(n), void 0, { withCredentials: !0 }).then((function (e) { var t = e.data; g(t) })).catch((0, f.handleFlowError)({ history: d.history, resetFlow: j })) : e.initializeSelfServiceRegistrationFlowForBrowsers(t.get("return_to") || void 0, { withCredentials: !0 }).then((function (e) { var t = e.data; g(t) })).catch((0, f.handleFlowError)({ history: d.history, resetFlow: j })) } }), [b, j]); var x = (0, f.getNodesForFlow)(b); return (0, l.jsxs)(l.Fragment, { children: [(0, l.jsx)("div", r({ className: "register-form auth-form" }, { children: (0, l.jsxs)("form", r({ action: null == b ? void 0 : b.ui.action, method: "POST", onSubmit: function (e) { return a(void 0, void 0, void 0, (function () { return o(this, (function (t) { return e.stopPropagation(), e.preventDefault(), n = { method: "password", csrf_token: e.currentTarget.csrf_token.value, traits: { email: e.currentTarget["traits.email"].value }, password: e.currentTarget.password.value }, a(void 0, void 0, void 0, (function () { return o(this, (function (e) { return (0, f.KratosSdk)(d.config.kratosBrowserUrl).submitSelfServiceRegistrationFlow(String(null == b ? void 0 : b.id), n, void 0, { withCredentials: !0 }).then((function (e) { var t = e.data; return a(void 0, void 0, void 0, (function () { var e, n; return o(this, (function (r) { switch (r.label) { case 0: if (r.trys.push([0, 2, , 3]), !t.session) throw new Error("Invalid session"); return [4, p()]; case 1: return (e = r.sent()) instanceof Error ? (s(e), [2]) : (d.history.push("/"), [3, 3]); case 2: return n = r.sent(), console.error(n), [3, 3]; case 3: return [2] } })) })) })).catch((0, f.handleFlowError)({ history: d.history, resetFlow: j })).catch((function (e) { var t, n; if (400 !== (null === (t = e.response) || void 0 === t ? void 0 : t.status)) return Promise.reject(e); g(null === (n = e.response) || void 0 === n ? void 0 : n.data) })), [2] })) })), [2]; var n })) })) } }, { children: [(0, l.jsx)("input", { type: "hidden", name: "csrf_token", value: null == x ? void 0 : x.csrf_token.attributes.value }), (0, l.jsxs)("div", r({ className: "input-container" }, { children: [(0, l.jsx)("div", r({ className: "" }, { children: (0, d.translate)("Email") })), (0, l.jsx)("input", { name: "traits.email", type: "email", defaultValue: null == x ? void 0 : x["traits.email"].value, autoComplete: "email", required: !0 }), (0, l.jsx)(v.Messages, { messages: null == x ? void 0 : x["traits.email"].messages })] })), (0, l.jsxs)("div", r({ className: "input-container" }, { children: [(0, l.jsx)("div", r({ className: "" }, { children: (0, d.translate)("Password") })), (0, l.jsx)("input", { name: "password", type: "password", autoComplete: "current-password", required: !0 }), (0, l.jsx)(v.Messages, { messages: null == x ? void 0 : x.password.messages })] })), (0, l.jsx)(v.Messages, { messages: null === (t = null == b ? void 0 : b.ui) || void 0 === t ? void 0 : t.messages }), (0, l.jsxs)("div", r({ className: "button-container" }, { children: [(0, l.jsx)("button", r({ className: "button", name: "method", value: "password" }, { children: (0, d.translate)("Create Account") })), (0, l.jsx)(h.default, r({ to: "/" }, { children: (0, d.translate)("Cancel") }))] }))] })) })), (0, l.jsx)("div", r({ className: "form-links" }, { children: (0, l.jsxs)(h.default, r({ to: "/login" }, { children: [(0, l.jsx)(m.default, { name: "login" }), (0, d.translate)("Login")] })) }))] }) } }, 6278: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var i = n(85893), s = n(67294), l = n(69535), u = o(n(66278)), c = o(n(80378)), d = o(n(21775)), f = o(n(50615)), h = o(n(98207)), v = o(n(66472)); t.default = function (e) { var t = e.to, n = (0, u.default)().defaultWallet, o = a((0, s.useState)({ fromWallet: n, view: "destination", currency: "USD", amount: "", destination: null != t ? t : "", memo: "" }), 2), m = o[0], p = o[1]; return (0, i.jsxs)("div", r({ className: "send" }, { children: [(0, i.jsx)(d.default, { page: "send-bitcoin" }), (0, i.jsx)("div", r({ className: "page-title" }, { children: (0, l.translate)("Send Bitcoin") })), "destination" === m.view && (0, i.jsx)(f.default, { input: m, setInput: p }), "amount" === m.view && (0, i.jsx)(h.default, { input: m, setInput: p }), "confirm" === m.view && (0, i.jsx)(v.default, { input: m }), (0, i.jsx)("div", r({ className: "action-button center-display" }, { children: (0, i.jsx)(c.default, r({ to: "/" }, { children: (0, l.translate)("Cancel") })) }))] })) } }, 97380: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var l = n(85893), u = n(67294), c = n(47125), d = n(69535), f = n(812), h = s(n(16018)), v = s(n(60341)), m = s(n(59405)), p = s(n(91604)), y = s(n(50061)), b = n(38735), g = s(n(10401)), j = s(n(23334)), x = s(n(80378)), w = function (e) { var t, n = e.flowData, s = (0, d.useAuthContext)().syncSession, h = i((0, u.useState)(null == n ? void 0 : n.settingsData), 2), v = h[0], m = h[1], p = (0, u.useCallback)((function () { m(void 0), window.location.href = "/login" }), []); (0, u.useEffect)((function () { if (!v && d.config.kratosFeatureFlag) { var e = (0, f.KratosSdk)(d.config.kratosBrowserUrl), t = new URLSearchParams(window.location.search), n = t.get("flow"), r = t.get("return_to"); n && (n ? e.getSelfServiceSettingsFlow(String(n), void 0, void 0, { withCredentials: !0 }).then((function (e) { var t = e.data; m(t), s() })).catch((0, f.handleFlowError)({ history: d.history, resetFlow: p })) : e.initializeSelfServiceSettingsFlowForBrowsers(r ? String(r) : void 0, { withCredentials: !0 }).then((function (e) { var t = e.data; return m(t) })).catch((0, f.handleFlowError)({ history: d.history, resetFlow: p }))) } }), [v, p, s]); var y = function (e) { return a(void 0, void 0, void 0, (function () { return o(this, (function (t) { return (0, f.KratosSdk)(d.config.kratosBrowserUrl).submitSelfServiceSettingsFlow(String(null == v ? void 0 : v.id), e, void 0, void 0, { withCredentials: !0 }).then((function (e) { var t = e.data; return a(void 0, void 0, void 0, (function () { return o(this, (function (e) { return [2, m(t)] })) })) })).catch((0, f.handleFlowError)({ history: d.history, resetFlow: p })).catch((function (e) { var t, n; if (400 !== (null === (t = e.response) || void 0 === t ? void 0 : t.status)) return Promise.reject(e); m(null === (n = e.response) || void 0 === n ? void 0 : n.data) })), [2] })) })) }, g = (0, f.getNodesForFlow)(v); return (0, l.jsx)("div", r({ className: "auth-settings auth-form" }, { children: (0, l.jsxs)("form", r({ action: null == v ? void 0 : v.ui.action, method: "POST", onSubmit: function (e) { return a(void 0, void 0, void 0, (function () { var t, n; return o(this, (function (r) { switch (r.label) { case 0: return e.stopPropagation(), e.preventDefault(), t = e.currentTarget, n = { method: "password", csrf_token: t.csrf_token.value, password: t.password.value }, [4, y(n)]; case 1: return r.sent(), t.password.value = "", [2] } })) })) } }, { children: [(0, l.jsx)(b.Messages, { messages: null === (t = null == v ? void 0 : v.ui) || void 0 === t ? void 0 : t.messages }), (0, l.jsx)("input", { type: "hidden", name: "csrf_token", value: null == g ? void 0 : g.csrf_token.attributes.value }), (0, l.jsxs)("div", r({ className: "input-container" }, { children: [(0, l.jsx)("div", r({ className: "" }, { children: (0, c.translate)("New Password") })), (0, l.jsx)("input", { name: "password", type: "password", autoComplete: "current-password", required: !0 }), (0, l.jsx)(b.Messages, { messages: null == g ? void 0 : g.password.messages })] })), (0, l.jsxs)("div", r({ className: "button-container" }, { children: [(0, l.jsx)("button", r({ className: "button", name: "method", value: "password" }, { children: (0, c.translate)("Save") })), (0, l.jsx)(x.default, r({ to: "/" }, { children: (0, c.translate)("Home") }))] }))] })) })) }, _ = function () { var e = (0, d.useAuthContext)().isAuthenticated; return (0, l.jsx)(h.default, { children: (0, l.jsxs)("div", r({ className: "list" }, { children: [d.config.kratosFeatureFlag && (0, l.jsx)(y.default, { guestView: !e }), (0, l.jsx)(p.default, { guestView: !e }), (0, l.jsx)(m.default, { guestView: !e }), (0, l.jsx)(v.default, {}), (0, l.jsx)("div", r({ className: "setting" }, { children: e ? (0, l.jsx)(j.default, {}) : (0, l.jsx)(g.default, {}) }))] })) }) }; t.default = function (e) { var t = e.flowData; return function () { if (d.config.isBrowser) return new URLSearchParams(window.location.search).get("flow") }() ? (0, l.jsx)(w, { flowData: t }) : (0, l.jsx)(_, {}) } }, 18359: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__values || function (e) { var t = "function" == typeof Symbol && Symbol.iterator, n = t && e[t], r = 0; if (n) return n.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var l = n(85893), u = n(67294), c = n(158), d = n(62338), f = n(69535), h = s(n(21775)), v = s(n(4410)), m = { edges: null, pageInfo: { hasNextPage: !1, hasPreviousPage: !1 } }; t.default = function (e) { var t, n, s, p = e.username, y = c.useQuery.transactionListForContact({ variables: { username: p, first: 25 } }), b = y.loading, g = y.data, j = y.refetch, x = (0, u.useRef)(m), w = null === (s = null == g ? void 0 : g.me) || void 0 === s ? void 0 : s.contactByUsername.transactions; !x.current.edges && w && (x.current = w); var _ = (0, u.useCallback)((function () { return a(void 0, void 0, void 0, (function () { var e, t, n, r, a, i; return o(this, (function (o) { switch (o.label) { case 0: return (e = x.current.pageInfo).hasNextPage ? [4, j({ username: p, first: 25, after: e.endCursor })] : [3, 2]; case 1: if (t = o.sent().data, !(n = null === (r = null == t ? void 0 : t.me) || void 0 === r ? void 0 : r.contactByUsername.transactions) || !n.edges) return [2]; x.current = { edges: null === (i = null === (a = x.current) || void 0 === a ? void 0 : a.edges) || void 0 === i ? void 0 : i.concat(n.edges), pageInfo: n.pageInfo }, o.label = 2; case 2: return [2] } })) })) }), [j, p]), N = x.current, S = N.edges, O = N.pageInfo, C = []; if (S) { var P = [], A = [], k = [], T = []; try { for (var M = i(S), I = M.next(); !I.done; I = M.next()) { var U = I.value.node; (0, c.isToday)(U.createdAt) ? P.push(U) : (0, c.isYesterday)(U.createdAt) ? A.push(U) : (0, c.isThisMonth)(U.createdAt) ? k.push(U) : T.push(U) } } catch (e) { t = { error: e } } finally { try { I && !I.done && (n = M.return) && n.call(M) } finally { if (t) throw t.error } } P.length > 0 && C.push({ title: (0, f.translate)("Today"), data: P }), A.length > 0 && C.push({ title: (0, f.translate)("Yesterday"), data: A }), k.length > 0 && C.push({ title: (0, f.translate)("This month"), data: k }), T.length > 0 && C.push({ title: (0, f.translate)("Previous months"), data: T }) } return (0, l.jsxs)("div", r({ className: "transaction-list" }, { children: [(0, l.jsx)(h.default, { page: "transactions" }), (0, l.jsx)("div", r({ className: "page-title" }, { children: (0, f.translate)("Transactions with %{contactUsername}", { contactUsername: p }) })), 0 === (null == S ? void 0 : S.length) && (0, l.jsx)("div", r({ className: "no-data" }, { children: (0, f.translate)("No transactions") })), C.map((function (e) { return (0, l.jsxs)("div", { children: [(0, l.jsx)("div", r({ className: "section-title" }, { children: e.title })), (0, l.jsx)("div", r({ className: "content" }, { children: e.data.map((function (e) { return (0, l.jsx)(v.default, { tx: e }, e.id) })) }))] }, "section.title") })), b ? (0, l.jsx)("div", r({ className: "load-more" }, { children: (0, l.jsx)(d.Spinner, {}) })) : O.hasNextPage && (0, l.jsx)("div", r({ className: "load-more link", onClick: _ }, { children: (0, f.translate)("Load more transactions") }))] })) } }, 80030: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(67294), s = n(158), l = n(62338), u = a(n(85346)), c = n(69535); t.default = function (e) { var t = e.input, n = e.setInput, a = (0, u.default)(), d = a.satsToUsd, f = a.usdToSats, h = Number.isNaN(t.satAmount) && "number" == typeof t.amount && !Number.isNaN(t.amount); (0, i.useEffect)((function () { f && "USD" === t.currency && h && n((function (e) { return r(r({}, e), { satAmount: Math.round(f(t.amount)), usdAmount: t.amount }) })) }), [t.currency, t.amount, t.memo, h, f, n]), (0, i.useEffect)((function () { d && "SATS" === t.currency && h && n((function (e) { return r(r({}, e), { satAmount: t.amount, usdAmount: d(t.amount) }) })) }), [t.currency, t.amount, t.memo, h, d, n]); var v = (0, i.useCallback)((function (e) { n((function (t) { return r(r({}, t), { amount: e, satAmount: NaN }) })) }), [n]), m = (0, i.useCallback)((function (e) { n((function (t) { return r(r({}, t), { memo: e, satAmount: NaN }) })) }), [n]), p = (0, i.useCallback)((function () { d && n((function (e) { var t = "SATS" === e.currency ? "USD" : "SATS", n = ""; return "SATS" === e.currency && e.amount && (n = Math.round(d(100 * e.amount)) / 100), "USD" === e.currency && e.satAmount && (n = e.satAmount), r(r({}, e), { currency: t, amount: n, satAmount: NaN }) })) }), [d, n]), y = (0, i.useMemo)((function () { if (!f || !d || Number.isNaN(t.amount)) return null; if ("SATS" === t.currency) return { usd: d(t.amount) }; var e = t.satAmount || f(t.amount); return { sats: e, usd: d(e) } }), [t.amount, t.currency, t.satAmount, d, f]), b = (0, i.useMemo)((function () { return y ? void 0 === y.sats ? (0, o.jsxs)("div", r({ className: "amount-seconddary" }, { children: ["≈ ", (0, s.formatUsd)(y.usd)] })) : (0, o.jsxs)(o.Fragment, { children: [(0, o.jsx)("div", r({ className: "amount-primarys" }, { children: (0, o.jsx)(l.SatFormat, { amount: y.sats }) })), (0, o.jsxs)("div", r({ className: "amount-seconddary small" }, { children: ["≈ ", (0, s.formatUsd)(y.usd)] }))] }) : null }), [y]); return (0, o.jsxs)("div", r({ className: "content" }, { children: [b && (0, o.jsx)("div", r({ className: "amount-converted" }, { children: (0, o.jsx)("div", r({ className: "amount-converted" }, { children: b })) })), (0, o.jsxs)("div", r({ className: "amount-and-note" }, { children: [(0, o.jsxs)("div", r({ className: "amount-input center-display" }, { children: [(0, o.jsx)("div", r({ className: "input-label" }, { children: (0, c.translate)("Set Amount") })), (0, o.jsxs)("div", r({ className: "amount-input-form" }, { children: [(0, o.jsx)("div", r({ className: "currency-label" }, { children: "SATS" === t.currency ? (0, o.jsx)(l.Icon, { name: "sat" }) : "$" })), (0, o.jsx)(l.FormattedNumberInput, { initValue: t.amount, onChange: v, placeholder: (0, c.translate)("Set invoice value in %{currency}", { currency: t.currency }) }), (0, o.jsx)("div", r({ className: "toggle-currency link", onClick: p }, { children: "⇅" }))] }))] })), (0, o.jsxs)("div", r({ className: "note-input center-display" }, { children: [(0, o.jsx)("div", r({ className: "input-label" }, { children: (0, c.translate)("Note or Label") })), (0, o.jsx)(l.DebouncedTextarea, { initValue: t.memo, onChange: m, name: "memo", rows: 3, placeholder: (0, c.translate)("Set a note for the sender here (optional)") })] }))] })), (0, o.jsx)("div", r({ className: "action-button center-display" }, { children: (0, o.jsxs)("button", r({ onClick: function () { return n((function (e) { return r(r({}, e), { view: "overview" }) })) }, disabled: void 0 === t.amount }, { children: [(0, c.translate)("Update Invoice"), " ", void 0 === t.amount && (0, o.jsx)(l.Spinner, { size: "small" })] })) }))] })) } }, 6322: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.OnChainInvoice = t.LightningInvoice = void 0; var i = n(85893), s = n(67294), l = n(45718), u = o(n(20640)), c = n(158), d = n(62338), f = n(69535), h = o(n(85346)), v = o(n(66278)); t.LightningInvoice = function (e) { var t = e.invoice, n = e.onPaymentSuccess, o = (0, v.default)().refetch, c = (0, h.default)().lnUpdate, d = a((0, s.useState)(!1), 2), m = d[0], p = d[1], y = (null == c ? void 0 : c.paymentHash) === (null == t ? void 0 : t.paymentHash) && "PAID" === (null == c ? void 0 : c.status); (0, s.useEffect)((function () { y && n && (o(), n()) }), [y, n, o]); var b = t.paymentRequest, g = b.substring(0, 21) + "..." + b.substring(b.length - 21); return (0, i.jsxs)("div", r({ className: "invoice-qrcode-container" }, { children: [(0, i.jsxs)("div", r({ className: "invoice-qrcode", onClick: function () { (0, u.default)(t.paymentRequest), p(!0), setTimeout((function () { return p(!1) }), 3e3) } }, { children: [m && (0, i.jsx)("div", r({ className: "invoice-copied" }, { children: (0, f.translate)("Invoice has been copied to the clipboard") })), (0, i.jsx)(l.QRCode, { value: "".concat(t.paymentRequest), size: 320, logoImage: "/images/qr-logo.png", logoWidth: 100 }), (0, i.jsx)("div", r({ className: "payment-destination-code" }, { children: g }))] })), (0, i.jsx)("div", r({ className: "copy-message" }, { children: (0, f.translate)("Click QR code to copy") }))] })) }, t.OnChainInvoice = function (e) { var t = e.btcAddress, n = e.satAmount, o = e.usdAmount, h = e.memo, v = a((0, s.useState)(!1), 2), m = v[0], p = v[1], y = new URLSearchParams; n && y.append("amount", "".concat((0, c.satsToBTC)(n))), h && y.append("message", encodeURI(h)); var b = y.toString() ? "?" + y.toString() : ""; return (0, i.jsxs)("div", r({ className: "invoice-qrcode-container" }, { children: [(0, i.jsxs)("div", r({ className: "invoice-qrcode", onClick: function () { (0, u.default)(t + b), p(!0), setTimeout((function () { return p(!1) }), 3e3) } }, { children: [m && (0, i.jsx)("div", r({ className: "invoice-copied" }, { children: (0, f.translate)("Address has been copied to the clipboard") })), (0, i.jsx)(l.QRCode, { value: t + b, size: 320, logoImage: "/images/qr-logo.png", logoWidth: 100 }), (0, i.jsx)("div", r({ className: "payment-destination-code" }, { children: t }))] })), (0, i.jsx)("div", r({ className: "copy-message" }, { children: (0, f.translate)("Click QR code to copy") })), (0, i.jsx)("div", r({ className: "amount-description" }, { children: 0 === n ? (0, f.translate)("Flexible Amount Invoice") : (0, i.jsxs)(i.Fragment, { children: [(0, i.jsx)("div", r({ className: "amount-primarys" }, { children: (0, i.jsx)(d.SatFormat, { amount: n }) })), (0, i.jsxs)("div", r({ className: "amount-seconddary small" }, { children: ["≈ ", (0, c.formatUsd)(o)] }))] }) }))] })) } }, 59319: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var i = n(85893), s = n(67294), l = n(158), u = n(62338), c = n(69535), d = n(6322), f = o(n(9507)), h = 36e5, v = function (e) { var t = e.onClick; return (0, i.jsxs)("div", r({ className: "invoice-message expired-invoice" }, { children: [(0, c.translate)("Invoice Expired"), " ", (0, i.jsx)("div", r({ className: "link", onClick: t }, { children: (0, c.translate)("Generate New Invoice") }))] })) }, m = function (e) { var t, n = e.wallet, o = e.regenerate, m = e.amount, p = e.memo, y = e.currency, b = e.satAmount, g = e.usdAmount, j = e.onPaymentSuccess, x = a((0, s.useState)(), 2), w = x[0], _ = x[1], N = (0, s.useRef)([]), S = a(l.useMutation.lnInvoiceCreate({ onCompleted: function () { return _("new") } }), 2), O = S[0], C = S[1], P = C.loading, A = C.errorsMessage, k = C.data, T = function () { N.current.forEach((function (e) { return clearTimeout(e) })) }; if ((0, s.useEffect)((function () { return O({ variables: { input: { walletId: n.id, amount: b, memo: p } } }), N.current.push(window.setTimeout((function () { return _("expired") }), h)), T }), [b, n.id, O, y, p]), A) return (0, i.jsx)(f.default, { message: A }); if (P) return (0, i.jsx)(u.Spinner, { size: "big" }); var M = null === (t = null == k ? void 0 : k.lnInvoiceCreate) || void 0 === t ? void 0 : t.invoice; if (!M) return null; if ("expired" === w) return (0, i.jsx)(v, { onClick: o }); var I = Boolean("USD" === y && m && Math.abs(g - m) / m > .01); return (0, i.jsxs)(i.Fragment, { children: [I && (0, i.jsxs)("div", r({ className: "invoice-message" }, { children: [(0, c.translate)("Invoice value is now %{value}", { value: (0, l.formatUsd)(g) }), (0, i.jsx)("div", r({ className: "link", onClick: o }, { children: (0, c.translate)("Generate new invoice for %{amount}", { amount: (0, l.formatUsd)(m) }) }))] })), (0, i.jsx)(d.LightningInvoice, { invoice: M, onPaymentSuccess: j }), (0, i.jsxs)("div", r({ className: "amount-description" }, { children: [(0, i.jsx)("div", r({ className: "amount-primarys" }, { children: (0, i.jsx)(u.SatFormat, { amount: b }) })), (0, i.jsxs)("div", r({ className: "amount-seconddary small" }, { children: ["≈ ", (0, l.formatUsd)(g)] }))] }))] }) }, p = function (e) { var t, n = e.wallet, o = e.regenerate, h = e.memo, m = e.usdAmount, p = e.onPaymentSuccess, y = a((0, s.useState)(), 2), b = y[0], g = y[1], j = (0, u.useCountdownTimer)(), x = j.timeLeft, w = j.startCountdownTimer, _ = j.stopCountdownTimer, N = a(l.useMutation.lnUsdInvoiceCreate({ onCompleted: function () { return g("new") } }), 2), S = N[0], O = N[1], C = O.loading, P = O.errorsMessage, A = O.data; (0, s.useEffect)((function () { return S({ variables: { input: { walletId: n.id, amount: 100 * m, memo: h } } }), function () { return _() } }), [S, h, m, n.id]); var k = null === (t = null == A ? void 0 : A.lnUsdInvoiceCreate) || void 0 === t ? void 0 : t.invoice; return (0, s.useEffect)((function () { if (k) { var e = (0, l.getLightningInvoiceExpiryTime)((0, l.decodeInvoiceString)(k.paymentRequest)) - Math.round(Date.now() / 1e3); return e <= 0 ? (g("expired"), void _()) : (w(e, (function () { return g("expired") })), function () { return _() }) } }), [k]), P ? (0, i.jsx)(f.default, { message: P }) : C ? (0, i.jsx)(u.Spinner, { size: "big" }) : k ? "expired" === b ? (0, i.jsx)(v, { onClick: o }) : (0, i.jsxs)(i.Fragment, { children: [(0, i.jsx)(d.LightningInvoice, { invoice: k, onPaymentSuccess: p }), (0, i.jsx)("div", r({ className: "amount-description" }, { children: (0, i.jsx)("div", r({ className: "amount-primary" }, { children: (0, l.formatUsd)(m) })) })), void 0 !== x && (0, i.jsx)("div", r({ className: "countdown-timer" }, { children: (0, i.jsxs)("div", r({ style: x < 10 ? { color: "red" } : void 0 }, { children: [(0, c.translate)("Expires In"), ":", " ", new Date(1e3 * x).toISOString().substring(14, 19)] })) }))] }) : null }, y = function (e) { var t, n = e.wallet, o = e.regenerate, m = e.memo, p = e.onPaymentSuccess, y = a((0, s.useState)(), 2), b = y[0], g = y[1], j = (0, s.useRef)([]), x = a(l.useMutation.lnNoAmountInvoiceCreate({ onCompleted: function () { return g("new") } }), 2), w = x[0], _ = x[1], N = _.loading, S = _.errorsMessage, O = _.data, C = function () { j.current.forEach((function (e) { return clearTimeout(e) })) }; if ((0, s.useEffect)((function () { return w({ variables: { input: { walletId: n.id, memo: m } } }), j.current.push(window.setTimeout((function () { return g("expired") }), h)), C }), [n.id, w, m]), S) return (0, i.jsx)(f.default, { message: S }); if (N) return (0, i.jsx)(u.Spinner, { size: "big" }); var P = null === (t = null == O ? void 0 : O.lnNoAmountInvoiceCreate) || void 0 === t ? void 0 : t.invoice; return P ? "expired" === b ? (0, i.jsx)(v, { onClick: o }) : (0, i.jsxs)(i.Fragment, { children: [(0, i.jsx)(d.LightningInvoice, { invoice: P, onPaymentSuccess: p }), (0, i.jsx)("div", r({ className: "amount-description" }, { children: (0, c.translate)("Flexible Amount Invoice") }))] }) : null }; t.default = function (e) { if ("onchain" === e.layer && e.btcAddress) return (0, i.jsx)(d.OnChainInvoice, { btcAddress: e.btcAddress, satAmount: e.satAmount, usdAmount: e.usdAmount, memo: e.memo }); if (0 === e.satAmount) return (0, i.jsx)(y, { wallet: e.wallet, regenerate: e.regenerate, memo: e.memo, onPaymentSuccess: e.onPaymentSuccess }); if ("BTC" === e.wallet.walletCurrency) return (0, i.jsx)(m, r({}, e)); if ("USD" === e.wallet.walletCurrency) return (0, i.jsx)(p, r({}, e)); throw new Error("Invalid invoice data") } }, 6729: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__createBinding || (Object.create ? function (e, t, n, r) { void 0 === r && (r = n); var a = Object.getOwnPropertyDescriptor(t, n); a && !("get" in a ? !t.__esModule : a.writable || a.configurable) || (a = { enumerable: !0, get: function () { return t[n] } }), Object.defineProperty(e, r, a) } : function (e, t, n, r) { void 0 === r && (r = n), e[r] = t[n] }), o = this && this.__setModuleDefault || (Object.create ? function (e, t) { Object.defineProperty(e, "default", { enumerable: !0, value: t }) } : function (e, t) { e.default = t }), i = this && this.__importStar || function (e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var n in e) "default" !== n && Object.prototype.hasOwnProperty.call(e, n) && a(t, e, n); return o(t, e), t }, s = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, l = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var u = n(85893), c = n(67294), d = n(158), f = n(69535), h = l(n(85346)), v = l(n(66278)), m = l(n(59319)), p = i(n(80378)); t.default = function (e) { var t, n, a, o = e.input, i = e.setInput, l = e.toggleWallet, y = (0, v.default)().wallets, b = (0, h.default)().satsToUsd, g = s(d.useMutation.onChainAddressCurrent(), 2), j = g[0], x = g[1], w = x.loading, _ = x.errorsMessage, N = x.data; if ((0, c.useEffect)((function () { "onchain" === o.layer && o.wallet && j({ variables: { input: { walletId: o.wallet.id } } }) }), [o.wallet, j, o.layer]), (0, c.useEffect)((function () { b && "USD" !== o.wallet.walletCurrency && i((function (e) { return r(r({}, e), { usdAmount: b(e.satAmount) }) })) }), [o.wallet, b, i]), _) throw console.debug("[BTC address error]:", _), new Error("Unable to get BTC address for wallet"); var S = null !== (n = null === (t = null == N ? void 0 : N.onChainAddressCurrent) || void 0 === t ? void 0 : t.address) && void 0 !== n ? n : void 0, O = (0, c.useCallback)((function () { i((function (e) { return r(r({}, e), { satAmount: NaN, usdAmount: NaN, view: "input" }) })) }), [i]), C = (0, c.useCallback)((function () { i((function (e) { return r(r({}, e), { layer: "lightning" === e.layer ? "onchain" : "lightning" }) })) }), [i]), P = (0, c.useCallback)((function () { i((function (e) { return r(r({}, e), { view: "input" }) })) }), [i]); return (0, u.jsxs)("div", r({ className: "content" }, { children: [o.wallet && y.length > 1 && (0, u.jsxs)("div", r({ className: "btc-usd-switch" }, { children: [(0, u.jsx)("div", r({ onClick: function () { return l() }, className: "button btc ".concat("BTC" === o.wallet.walletCurrency && "active") }, { children: "BTC" })), (0, u.jsx)("div", r({ onClick: function () { return l() }, className: "button usd ".concat("USD" === o.wallet.walletCurrency && "active") }, { children: "USD" }))] })), (0, u.jsx)("div", r({ className: "action-container center-display invoice-generator" }, { children: function () { if (!o.wallet) return (0, u.jsx)(p.ButtonLink, r({ to: "/login" }, { children: (0, f.translate)("Login to send") })); var e = void 0 === o.amount || void 0 === o.memo; return !w && !e && void 0 !== o.satAmount && !Number.isNaN(o.satAmount) && (0, u.jsx)(m.default, { layer: o.layer, wallet: o.wallet, btcAddress: S, regenerate: O, amount: o.amount, currency: o.currency, memo: o.memo, satAmount: o.satAmount, usdAmount: o.usdAmount, onPaymentSuccess: function () { return i((function (e) { return r(r({}, e), { satAmount: NaN, usdAmount: NaN, view: "success" }) })) } }) }() })), (0, u.jsxs)("div", r({ className: "action-button center-display" }, { children: [(0, u.jsx)("div", r({ className: "receive-action", onClick: P }, { children: (0, f.translate)("Set amount/note") })), "BTC" === (null === (a = o.wallet) || void 0 === a ? void 0 : a.walletCurrency) && (0, u.jsx)("div", r({ className: "receive-action", onClick: C }, { children: "lightning" === o.layer ? (0, f.translate)("Use a Bitcoin on-chain adddress") : (0, f.translate)("Use a Lightning invoice") }))] })), (0, u.jsx)("div", r({ className: "action-button center-display" }, { children: (0, u.jsx)(p.default, r({ to: "/" }, { children: (0, f.translate)("Cancel") })) }))] })) } }, 87267: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__rest || function (e, t) { var n = {}; for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]); if (null != e && "function" == typeof Object.getOwnPropertySymbols) { var a = 0; for (r = Object.getOwnPropertySymbols(e); a < r.length; a++)t.indexOf(r[a]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[a]) && (n[r[a]] = e[r[a]]) } return n }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var i = n(85893), s = n(67294), l = n(35800), u = n(62338), c = n(46570), d = o(n(66278)), f = o(n(58274)); t.default = function (e) { var t = e.path, n = e.flowData, o = a(e, ["path", "flowData"]), h = (0, c.checkRoute)(t), v = (0, d.default)().language; if (!(h instanceof Error)) { var m = c.appRoutes[h].component; return (0, i.jsx)(s.Suspense, r({ fallback: (0, i.jsx)("div", r({ className: "suspense-fallback" }, { children: (0, i.jsx)(u.Spinner, { size: "big" }) })) }, { children: (0, i.jsx)(l.ErrorBoundary, r({ FallbackComponent: f.default }, { children: (0, i.jsx)("div", r({ id: "main-container", "data-language": v }, { children: (0, i.jsx)(m, r({}, o)) })) })) })) } var p = (0, c.checkAuthRoute)(t); if (!(p instanceof Error)) return m = c.authRoutes[p].component, (0, i.jsx)(s.Suspense, r({ fallback: (0, i.jsx)("div", r({ className: "suspense-fallback" }, { children: (0, i.jsx)(u.Spinner, { size: "big" }) })) }, { children: (0, i.jsx)(l.ErrorBoundary, r({ FallbackComponent: f.default }, { children: (0, i.jsx)("div", r({ id: "main-container" }, { children: (0, i.jsx)(m, r({ flowData: n }, o)) })) })) })); throw h } }, 19539: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.SSRRoot = void 0; var i = n(85893), s = n(67294), l = n(69535), u = n(40715), c = o(n(87267)); t.SSRRoot = function (e) { var t = e.client, n = e.GwwState, o = a((0, s.useReducer)(l.mainReducer, n, (function (e) { return (0, l.setLocale)(e.defaultLanguage), e })), 2), d = o[0], f = o[1]; return (0, i.jsx)(u.AuthProvider, r({ galoyClient: t, authIdentity: d.authIdentity }, { children: (0, i.jsx)(l.GwwContext.Provider, r({ value: { state: d, dispatch: f } }, { children: (0, i.jsx)(c.default, r({ path: d.path, flowData: d.flowData }, d.props)) })) })) }, t.default = function (e) { var t = e.GwwState, n = a((0, s.useReducer)(l.mainReducer, t, (function (e) { return (0, l.setLocale)(e.defaultLanguage), e })), 2), o = n[0], d = n[1]; return (0, s.useEffect)((function () { var e = l.history.listen((function (e) { var t = e.location, n = Object.fromEntries(new URLSearchParams(t.search)); d(r({ type: "update", path: t.pathname, props: n }, t.state)) })); return function () { e() } }), [d]), (0, i.jsx)(u.AuthProvider, r({ authIdentity: o.authIdentity }, { children: (0, i.jsx)(l.GwwContext.Provider, r({ value: { state: o, dispatch: d } }, { children: (0, i.jsx)(c.default, r({ path: o.path, flowData: o.flowData }, o.props), o.key) })) })) } }, 6406: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(158), s = n(62338), l = n(69535), u = a(n(85346)), c = function (e) { var t = e.amount, n = (0, u.default)().satsToUsd; return void 0 === (null == t ? void 0 : t.amount) ? null : (0, o.jsxs)("div", r({ className: "fee-amount" }, { children: [(0, o.jsx)("div", r({ className: "label" }, { children: "Fee" })), (0, o.jsx)("div", r({ className: "content" }, { children: "SATS" === t.currency ? (0, o.jsxs)(o.Fragment, { children: [(0, o.jsx)(s.SatFormat, { amount: t.amount }), n && t.amount > 0 && (0, o.jsxs)("div", r({ className: "fee-usd-amount small" }, { children: ["≈ ", (0, i.formatUsd)(n(t.amount))] }))] }) : (0, o.jsx)("div", { children: (0, i.formatUsd)(t.amount / 100) }) }))] })) }, d = function (e) { switch (e.status) { case "ALREADY_PAID": return (0, o.jsx)("div", r({ className: "error" }, { children: (0, l.translate)("Invoice is already paid") })); case "SUCCESS": return (0, o.jsx)(s.SuccessCheckmark, {}); default: return (0, o.jsx)("div", r({ className: "error" }, { children: (0, l.translate)("Payment failed") })) } }; t.default = function (e) { var t = e.loading, n = e.error, a = e.data, i = e.feeAmount, u = e.reset, f = e.handleSend; return n ? (0, o.jsx)("div", r({ className: "error" }, { children: n })) : (null == a ? void 0 : a.status) ? (0, o.jsxs)("div", r({ className: "invoice-status" }, { children: [(0, o.jsx)(d, { status: a.status }), (0, o.jsx)("button", r({ onClick: u }, { children: (0, l.translate)("Send another payment") }))] })) : (0, o.jsxs)(o.Fragment, { children: [void 0 !== i && (0, o.jsx)(c, { amount: i }), (0, o.jsxs)("button", r({ onClick: f, disabled: t }, { children: [(0, l.translate)("Send Payment"), " ", t && (0, o.jsx)(s.Spinner, { size: "small" })] }))] }) } }, 49474: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(67294), s = n(69535), l = a(n(66278)), u = n(80378), c = a(n(33246)), d = a(n(28563)), f = n(24692), h = n(70348), v = a(n(90191)), m = n(62338), p = n(158); t.default = function (e) { var t, n, a, y, b, g, j = e.children, x = e.input, w = (0, s.useAppDispatcher)(), _ = (0, l.default)(), N = _.btcWalletId, S = _.btcWalletBalance, O = _.usdWalletId, C = _.usdWalletBalance, P = (0, i.useCallback)((function () { w({ type: "navigate", path: "/send" }) }), [w]); if (!N) return (0, o.jsx)(u.ButtonLink, r({ to: "/login" }, { children: (0, s.translate)("Login to send") })); if (x.errorMessage) return (0, o.jsx)("div", r({ className: "error" }, { children: x.errorMessage })); var A = void 0 === x.amount || void 0 === x.destination || void 0 === x.memo, k = "number" == typeof x.amount && void 0 === x.satAmount; if ("BTC" === (null === (t = x.fromWallet) || void 0 === t ? void 0 : t.walletCurrency) && x.satAmount && x.satAmount > S) return (0, o.jsx)("div", r({ className: "error" }, { children: (0, s.translate)("Payment amount exceeds balance of %{balance}", { balance: (0, p.formatSats)(S) }) })); if ("USD" === (null === (n = x.fromWallet) || void 0 === n ? void 0 : n.walletCurrency) && x.usdAmount && x.usdAmount > C) return (0, o.jsx)("div", r({ className: "error" }, { children: (0, s.translate)("Payment amount exceeds balance of %{balance}", { balance: (0, p.formatUsd)(C) }) })); if (j) return (0, o.jsx)(o.Fragment, { children: j }); if (A || k) return (0, o.jsx)(m.Spinner, { size: "big" }); if (!x.valid || !x.fixedAmount && "number" != typeof x.amount || "intraledger" === x.paymentType && !x.recipientWalletId) return (0, o.jsx)("button", r({ disabled: !0 }, { children: (0, s.translate)("Enter amount and destination") })); var T = r(r({}, x), { btcWalletId: N, usdWalletId: O, reset: P }); return "lightning" === T.paymentType && "BTC" === (null === (a = x.fromWallet) || void 0 === a ? void 0 : a.walletCurrency) ? T.fixedAmount ? (0, o.jsx)(f.SendLnInvoiceAction, r({}, T)) : (0, o.jsx)(f.SendLnNoAmountInvoiceAction, r({}, T)) : "lightning" === T.paymentType && "USD" === (null === (y = x.fromWallet) || void 0 === y ? void 0 : y.walletCurrency) ? T.fixedAmount ? (0, o.jsx)(h.SendLnUsdInvoiceAction, r({}, T)) : (0, o.jsx)(h.SendLnNoAmountUsdInvoiceAction, r({}, T)) : "onchain" === T.paymentType ? (0, o.jsx)(v.default, r({}, T)) : "intraledger" === T.paymentType && "BTC" === (null === (b = x.fromWallet) || void 0 === b ? void 0 : b.walletCurrency) ? (0, o.jsx)(c.default, r({}, T)) : "intraledger" === T.paymentType && "USD" === (null === (g = x.fromWallet) || void 0 === g ? void 0 : g.walletCurrency) ? (0, o.jsx)(d.default, r({}, T)) : (0, o.jsx)("button", r({ disabled: !0 }, { children: (0, s.translate)("Enter amount and destination") })) } }, 98207: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var i = n(85893), s = n(67294), l = n(158), u = n(62338), c = n(69535), d = o(n(85346)), f = o(n(66278)), h = o(n(49474)); t.default = function (e) { var t, n = e.input, o = e.setInput, v = (0, d.default)(), m = v.satsToUsd, p = v.usdToSats, y = (0, f.default)(), b = y.wallets, g = y.btcWallet, j = y.btcWalletBalance, x = y.usdWalletBalance, w = a((0, s.useState)(!1), 2), _ = w[0], N = w[1]; (0, s.useEffect)((function () { if (p && "USD" === n.currency && "number" == typeof n.amount) { var e = Math.round(p(n.amount)); o((function (t) { return r(r({}, t), { satAmount: e }) })) } if (m && "SATS" === n.currency && "number" == typeof n.amount) { var t = m(n.amount); o((function (e) { return r(r({}, e), { usdAmount: t }) })) } }), [n.currency, n.amount, p, o, m]), (0, s.useEffect)((function () { "SATS" === n.currency && "number" == typeof n.amount && o((function (e) { return r(r({}, e), { satAmount: n.amount }) })), "USD" === n.currency && "number" == typeof n.amount && o((function (e) { return r(r({}, e), { usdAmount: n.amount }) })) }), [n.currency, n.amount, o]); var S = "onchain" === n.paymentType ? g : n.fromWallet, O = (0, s.useCallback)((function (e) { o((function (t) { return r(r({}, t), { amount: e }) })) }), [o]), C = (0, s.useCallback)((function (e) { o((function (t) { return r(r({}, t), { memo: e }) })) }), [o]), P = (0, s.useCallback)((function () { m && o((function (e) { var t = "SATS" === e.currency ? "USD" : "SATS", n = ""; return "SATS" === e.currency && e.usdAmount && (n = e.usdAmount), "USD" === e.currency && e.satAmount && (n = e.satAmount), r(r({}, e), { currency: t, amount: n }) })) }), [m, o]), A = (0, s.useMemo)((function () { return p && m && n.amount ? "SATS" === n.currency ? (0, i.jsxs)("div", r({ className: "amount-display" }, { children: [(0, i.jsx)("div", r({ className: "primary" }, { children: (0, i.jsx)(u.SatFormat, { amount: n.satAmount || p(n.amount) }) })), (0, i.jsxs)("div", r({ className: "converted" }, { children: ["≈ ", (0, l.formatUsd)(n.usdAmount || m(n.amount))] }))] })) : (0, i.jsxs)("div", r({ className: "amount-display" }, { children: [(0, i.jsx)("div", r({ className: "primary" }, { children: (0, l.formatUsd)(n.usdAmount || n.amount) })), (0, i.jsxs)("div", r({ className: "converted" }, { children: ["≈ ", (0, i.jsx)(u.SatFormat, { amount: n.satAmount || p(n.amount) })] }))] })) : null }), [n.amount, n.currency, n.satAmount, n.usdAmount, m, p]), k = (0, i.jsx)("div", r({ className: "modal-background" }, { children: (0, i.jsxs)("div", r({ className: "modal-content" }, { children: [(0, i.jsx)("div", r({ className: "title" }, { children: (0, c.translate)("From Wallet") })), (0, i.jsx)("div", { children: b.map((function (e) { var t; return (0, i.jsxs)("div", r({ className: "wallet link", onClick: function () { o((function (t) { return r(r({}, t), { fromWallet: e }) })), N(!1) } }, { children: ["BTC" === e.walletCurrency ? (0, i.jsx)("div", r({ className: "icon-btc" }, { children: "BTC" })) : (0, i.jsx)("div", r({ className: "icon-usd" }, { children: "USD" })), (0, i.jsxs)("div", r({ className: "title-balance" }, { children: [(0, i.jsx)("div", r({ className: "title" }, { children: "BTC" === e.walletCurrency ? "Bitcoin Wallet" : "US Dollar Wallet" })), (0, i.jsx)("div", r({ className: "balance" }, { children: "BTC" === e.walletCurrency ? (0, i.jsxs)(i.Fragment, { children: [(0, l.formatUsd)(null !== (t = null == m ? void 0 : m(j)) && void 0 !== t ? t : NaN), " - ", (0, l.formatSats)(j)] }) : (0, l.formatUsd)(x) }))] }))] }), e.id) })) })] })) })), T = S && (0, i.jsxs)(i.Fragment, { children: [(0, i.jsx)("div", r({ className: "input-label" }, { children: (0, c.translate)("From Wallet") })), (0, i.jsxs)("div", r({ className: "wallet" }, { children: ["BTC" === S.walletCurrency ? (0, i.jsx)("div", r({ className: "icon-btc" }, { children: "BTC" })) : (0, i.jsx)("div", r({ className: "icon-usd" }, { children: "USD" })), (0, i.jsxs)("div", r({ className: "title-balance" }, { children: [(0, i.jsx)("div", r({ className: "title" }, { children: "BTC" === S.walletCurrency ? "Bitcoin Wallet" : "US Dollar Wallet" })), (0, i.jsx)("div", r({ className: "balance" }, { children: "BTC" === S.walletCurrency ? (0, i.jsxs)(i.Fragment, { children: [(0, l.formatUsd)(null !== (t = null == m ? void 0 : m(j)) && void 0 !== t ? t : NaN), " - ", (0, l.formatSats)(j)] }) : (0, l.formatUsd)(x) }))] })), "onchain" !== n.paymentType && b.length > 1 && (0, i.jsx)("div", r({ className: "pick-icon", onClick: function () { return N(!0) } }, { children: (0, i.jsx)(u.Icon, { name: "submit" }) }))] }), S.id)] }); return (0, i.jsxs)("div", { children: [(0, i.jsxs)("div", r({ className: "amount-input center-display" }, { children: [b && (0, i.jsx)("div", r({ className: "wallet-selector" }, { children: _ ? k : T })), (0, i.jsx)("div", r({ className: "input-label" }, { children: (0, c.translate)("Amount") })), (0, i.jsxs)("div", r({ className: "amount-input-form" }, { children: [(0, i.jsx)("div", r({ className: "currency-label" }, { children: "SATS" === n.currency ? (0, i.jsx)(u.Icon, { name: "sat" }) : "$" })), (0, i.jsx)(u.FormattedNumberInput, { initValue: n.amount, onChange: O, disabled: n.fixedAmount || _, autoComplete: "off", placeholder: (0, c.translate)("Set value to send in %{currency}", { currency: n.currency }) }), !n.fixedAmount && "BTC" === (null == S ? void 0 : S.walletCurrency) && (0, i.jsx)("div", r({ className: "toggle-currency link", onClick: P }, { children: "⇅" }))] }))] })), (0, i.jsxs)("div", r({ className: "note-input center-display" }, { children: [(0, i.jsx)("div", r({ className: "input-label" }, { children: (0, c.translate)("Note or Label") })), (0, i.jsx)(u.DebouncedTextarea, { initValue: n.memo, onChange: C, name: "memo", rows: 3, disabled: _, placeholder: (0, c.translate)("Set a note for the receiver here (optional)") })] })), A && (0, i.jsx)("div", r({ className: "amount-converted" }, { children: A })), (0, i.jsx)("div", r({ className: "action-button center-display" }, { children: (0, i.jsx)(h.default, r({ input: n }, { children: (0, i.jsxs)("button", r({ onClick: function () { return o((function (e) { return r(r({}, e), { view: "confirm" }) })) }, disabled: !n.amount || _ }, { children: [(0, c.translate)("Next"), " ", void 0 === n.amount && (0, i.jsx)(u.Spinner, { size: "small" })] })) })) }))] }) } }, 66472: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(67294), s = n(158), l = n(62338), u = n(69535), c = a(n(85346)), d = a(n(49474)); t.default = function (e) { var t = e.input, n = (0, c.default)(), a = n.satsToUsd, f = n.usdToSats, h = (0, i.useMemo)((function () { return f && a && t.amount ? "SATS" === t.currency ? (0, o.jsxs)("div", r({ className: "amount-display" }, { children: [(0, o.jsx)("div", r({ className: "primary" }, { children: (0, o.jsx)(l.SatFormat, { amount: t.satAmount || f(t.amount) }) })), (0, o.jsxs)("div", r({ className: "converted" }, { children: ["≈ ", (0, s.formatUsd)(a(t.amount))] }))] })) : (0, o.jsxs)("div", r({ className: "amount-display" }, { children: [(0, o.jsx)("div", r({ className: "primary" }, { children: (0, s.formatUsd)(t.amount) })), (0, o.jsxs)("div", r({ className: "converted" }, { children: ["≈ ", (0, o.jsx)(l.SatFormat, { amount: t.satAmount || f(t.amount) })] }))] })) : null }), [t.amount, t.currency, t.satAmount, a, f]), v = !t.destination || t.destination.length < 24 ? t.destination : t.destination.substring(0, 12) + "..." + t.destination.substring(t.destination.length - 12); return (0, o.jsx)(o.Fragment, { children: (0, o.jsxs)("div", r({ className: "send-confirm center-display" }, { children: [(0, o.jsxs)("div", r({ className: "item" }, { children: [(0, o.jsx)("div", r({ className: "label" }, { children: (0, u.translate)("Amount") })), (0, o.jsx)("div", r({ className: "content" }, { children: h }))] })), (0, o.jsxs)("div", r({ className: "item" }, { children: [(0, o.jsx)("div", r({ className: "label" }, { children: (0, u.translate)("To") })), (0, o.jsx)("div", r({ className: "content" }, { children: v }))] })), t.memo && (0, o.jsxs)("div", r({ className: "item" }, { children: [(0, o.jsx)("div", r({ className: "label" }, { children: (0, u.translate)("Note") })), (0, o.jsx)("div", r({ className: "content" }, { children: t.memo }))] })), (0, o.jsx)("div", r({ className: "action-container" }, { children: (0, o.jsx)(d.default, { input: t }) }))] })) }) } }, 50615: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var l = n(85893), u = n(67294), c = n(158), d = n(62338), f = n(69535), h = s(n(66278)), v = s(n(85346)), m = s(n(49474)); t.default = function (e) { var t = e.input, n = e.setInput, s = (0, h.default)(), p = s.pubKey, y = s.btcWalletId, b = s.username, g = (0, v.default)(), j = g.satsToUsd, x = g.usdToSats, w = i(c.useDelayedQuery.userDefaultWalletId(), 2), _ = w[0], N = w[1].loading, S = (0, u.useCallback)((function (e) { return a(void 0, void 0, void 0, (function () { var t, a, i, s; return o(this, (function (o) { switch (o.label) { case 0: return t = { valid: e.valid, errorMessage: e.errorMessage, paymentType: e.paymentType, sameNode: e.sameNode, fixedAmount: void 0 !== e.amount, paymentRequest: e.paymentRequest, address: e.address }, y && "intraledger" === e.paymentType ? e.handle !== b ? [3, 1] : (t.errorMessage = (0, f.translate)("You can't send to yourself"), [3, 3]) : [3, 3]; case 1: return [4, _({ username: e.handle })]; case 2: a = o.sent(), i = a.data, (s = a.errorsMessage) ? t.errorMessage = s : t.recipientWalletId = null == i ? void 0 : i.userDefaultWalletId, o.label = 3; case 3: return "onchain" === e.paymentType && (t.destination = e.address), "lightning" === e.paymentType && (t.destination = e.paymentRequest), e.memo && (t.memo = e.memo), n((function (n) { return r(r(r({}, n), t), { amount: t.fixedAmount ? e.amount : n.amount, currency: t.fixedAmount ? "SATS" : n.currency }) })), [2] } })) })) }), [y, n, _, b]); (0, u.useEffect)((function () { a(void 0, void 0, void 0, (function () { var e; return o(this, (function (n) { return void 0 !== t.destination && (e = (0, c.parsePaymentDestination)({ destination: t.destination, network: f.config.network, pubKey: p }), S(e)), [2] })) })) }), [y, t.destination, p, S]); var O = (0, u.useCallback)((function () { n((function (e) { return r(r({}, e), { errorMessage: void 0, destination: void 0 }) })) }), [n]), C = (0, u.useCallback)((function (e) { n((function (t) { return r(r({}, t), { destination: e }) })) }), [n]), P = (0, u.useMemo)((function () { return x && j && t.amount ? "SATS" === t.currency ? (0, l.jsxs)("div", r({ className: "amount-display" }, { children: [(0, l.jsx)("div", r({ className: "primary" }, { children: (0, l.jsx)(d.SatFormat, { amount: t.satAmount || x(t.amount) }) })), (0, l.jsxs)("div", r({ className: "converted" }, { children: ["≈ ", (0, c.formatUsd)(j(t.amount))] }))] })) : (0, l.jsxs)("div", r({ className: "amount-display" }, { children: [(0, l.jsx)("div", r({ className: "primary" }, { children: (0, c.formatUsd)(t.amount) })), (0, l.jsxs)("div", r({ className: "converted" }, { children: ["≈ ", (0, l.jsx)(d.SatFormat, { amount: t.satAmount || x(t.amount) })] }))] })) : null }), [t.amount, t.currency, t.satAmount, j, x]), A = (0, u.useCallback)((function (e) { if (e.match(/^(bitcoin:|lightning:|1|3|bc|ln)/iu)) { var t = (0, c.parsePaymentDestination)({ destination: e, network: f.config.network, pubKey: p }); return t.valid ? t : r(r({}, t), { errorMessage: (null == t ? void 0 : t.errorMessage) || (0, f.translate)("Invalid QR Code") }) } return !1 }), [p]); return (0, l.jsxs)("div", r({ className: "destination-container center-display" }, { children: [(0, l.jsxs)("div", r({ className: "destination-input" }, { children: [(0, l.jsx)("div", r({ className: "input-label" }, { children: (0, f.translate)("Destination") })), (0, l.jsxs)("div", r({ className: "destination" }, { children: [(0, l.jsx)(d.DebouncedInput, { initValue: t.destination, onChange: O, onDebouncedChange: C, disabled: N, type: "text", name: "destination", autoComplete: "off", placeholder: (0, f.translate)("username, invoice, or address") }), (0, l.jsx)(d.QRCodeDetecor, { autoStart: f.config.isBrowser && "/scan" === window.location.pathname, startText: "", stopText: (0, f.translate)("Close"), onCodeDetected: A, onValidCode: S })] }))] })), P && (0, l.jsx)("div", r({ className: "amount-converted" }, { children: P })), (0, l.jsx)("div", r({ className: "action-container" }, { children: (0, l.jsx)(m.default, r({ input: t }, { children: (0, l.jsxs)("button", r({ onClick: function () { return n((function (e) { return r(r({}, e), { view: "amount" }) })) }, disabled: !t.destination || N }, { children: [(0, f.translate)("Next"), " ", (void 0 === t.destination || N) && (0, l.jsx)(d.Spinner, { size: "small" })] })) })) }))] })) } }, 33246: function (e, t, n) { "use strict"; var r = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(158), s = a(n(6406)), l = a(n(66278)); t.default = function (e) { var t = (0, l.default)().refetch, n = r(i.useMutation.intraLedgerPaymentSend({ onCompleted: function () { t() } }), 2), a = n[0], u = n[1], c = u.loading, d = u.errorsMessage, f = u.data; return (0, o.jsx)(s.default, { loading: c, error: d, data: null == f ? void 0 : f.intraLedgerPaymentSend, feeAmount: { amount: 0, currency: "SATS" }, reset: e.reset, handleSend: function (t) { t.preventDefault(), a({ variables: { input: { walletId: e.btcWalletId, recipientWalletId: e.recipientWalletId, amount: e.satAmount, memo: e.memo } } }) } }) } }, 28563: function (e, t, n) { "use strict"; var r = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(158), s = a(n(6406)), l = a(n(66278)); t.default = function (e) { var t = (0, l.default)().refetch, n = r(i.useMutation.intraLedgerUsdPaymentSend({ onCompleted: function () { t() } }), 2), a = n[0], u = n[1], c = u.loading, d = u.errorsMessage, f = u.data; return (0, o.jsx)(s.default, { loading: c, error: d, data: null == f ? void 0 : f.intraLedgerUsdPaymentSend, feeAmount: { amount: 0, currency: "CENTS" }, reset: e.reset, handleSend: function (t) { t.preventDefault(), a({ variables: { input: { walletId: e.usdWalletId, recipientWalletId: e.recipientWalletId, amount: 100 * e.usdAmount, memo: e.memo } } }) } }) } }, 24692: function (e, t, n) { "use strict"; var r = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.SendLnNoAmountInvoiceAction = t.SendLnInvoiceAction = void 0; var o = n(85893), i = n(67294), s = n(158), l = a(n(6406)), u = a(n(66278)); t.SendLnInvoiceAction = function (e) { var t, n, a = (0, u.default)().refetch, c = r(s.useMutation.lnInvoicePaymentSend({ onCompleted: function () { a() } }), 2), d = c[0], f = c[1], h = f.loading, v = f.data, m = f.errorsMessage, p = r(s.useMutation.lnInvoiceFeeProbe(), 2), y = p[0], b = p[1], g = b.loading, j = b.data, x = b.errorsMessage; (0, i.useEffect)((function () { y({ variables: { input: { walletId: e.btcWalletId, paymentRequest: e.paymentRequest } } }) }), [y, e.btcWalletId, e.paymentRequest, e.sameNode]); var w = { amount: null !== (n = null === (t = null == j ? void 0 : j.lnInvoiceFeeProbe) || void 0 === t ? void 0 : t.amount) && void 0 !== n ? n : void 0, currency: "SATS" }; return (0, o.jsx)(l.default, { loading: h || g, error: m || x, data: null == v ? void 0 : v.lnInvoicePaymentSend, feeAmount: w, reset: e.reset, handleSend: function (t) { t.preventDefault(), d({ variables: { input: { walletId: e.btcWalletId, paymentRequest: e.paymentRequest, memo: e.memo } } }) } }) }, t.SendLnNoAmountInvoiceAction = function (e) { var t, n, a = r(s.useMutation.lnNoAmountInvoicePaymentSend(), 2), u = a[0], c = a[1], d = c.loading, f = c.data, h = c.errorsMessage, v = r(s.useMutation.lnNoAmountInvoiceFeeProbe(), 2), m = v[0], p = v[1], y = p.loading, b = p.data, g = p.errorsMessage; (0, i.useEffect)((function () { e.sameNode || m({ variables: { input: { walletId: e.btcWalletId, paymentRequest: e.paymentRequest, amount: e.satAmount } } }) }), [m, e.btcWalletId, e.paymentRequest, e.sameNode, e.satAmount]); var j = { amount: e.sameNode ? 0 : null !== (n = null === (t = null == b ? void 0 : b.lnNoAmountInvoiceFeeProbe) || void 0 === t ? void 0 : t.amount) && void 0 !== n ? n : void 0, currency: "SATS" }; return (0, o.jsx)(l.default, { loading: d || y, error: h || g, data: null == f ? void 0 : f.lnNoAmountInvoicePaymentSend, feeAmount: j, reset: e.reset, handleSend: function (t) { t.preventDefault(), u({ variables: { input: { walletId: e.btcWalletId, paymentRequest: e.paymentRequest, amount: e.satAmount, memo: e.memo } } }) } }) } }, 70348: function (e, t, n) { "use strict"; var r = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.SendLnNoAmountUsdInvoiceAction = t.SendLnUsdInvoiceAction = void 0; var o = n(85893), i = n(67294), s = n(158), l = a(n(6406)), u = a(n(66278)); t.SendLnUsdInvoiceAction = function (e) { var t, n, a = (0, u.default)().refetch, c = r(s.useMutation.lnInvoicePaymentSend({ onCompleted: function () { a() } }), 2), d = c[0], f = c[1], h = f.loading, v = f.data, m = f.errorsMessage, p = r(s.useMutation.lnUsdInvoiceFeeProbe(), 2), y = p[0], b = p[1], g = b.loading, j = b.data, x = b.errorsMessage; (0, i.useEffect)((function () { y({ variables: { input: { walletId: e.fromWallet.id, paymentRequest: e.paymentRequest } } }) }), [y, e.fromWallet, e.paymentRequest, e.sameNode]); var w = { amount: null !== (n = null === (t = null == j ? void 0 : j.lnUsdInvoiceFeeProbe) || void 0 === t ? void 0 : t.amount) && void 0 !== n ? n : void 0, currency: "CENTS" }; return (0, o.jsx)(l.default, { loading: h || g, error: m || x, data: null == v ? void 0 : v.lnInvoicePaymentSend, feeAmount: w, reset: e.reset, handleSend: function (t) { t.preventDefault(), d({ variables: { input: { walletId: e.fromWallet.id, paymentRequest: e.paymentRequest, memo: e.memo } } }) } }) }, t.SendLnNoAmountUsdInvoiceAction = function (e) { var t, n, a = r(s.useMutation.lnNoAmountUsdInvoicePaymentSend(), 2), u = a[0], c = a[1], d = c.loading, f = c.data, h = c.errorsMessage, v = r(s.useMutation.lnNoAmountUsdInvoiceFeeProbe(), 2), m = v[0], p = v[1], y = p.loading, b = p.data, g = p.errorsMessage; (0, i.useEffect)((function () { e.sameNode || m({ variables: { input: { walletId: e.fromWallet.id, paymentRequest: e.paymentRequest, amount: 100 * e.usdAmount } } }) }), [m, e.fromWallet.id, e.paymentRequest, e.sameNode, e.usdAmount]); var j = { amount: e.sameNode ? 0 : null !== (n = null === (t = null == b ? void 0 : b.lnNoAmountUsdInvoiceFeeProbe) || void 0 === t ? void 0 : t.amount) && void 0 !== n ? n : void 0, currency: "CENTS" }; return (0, o.jsx)(l.default, { loading: d || y, error: h || g, data: null == f ? void 0 : f.lnNoAmountUsdInvoicePaymentSend, feeAmount: j, reset: e.reset, handleSend: function (t) { t.preventDefault(), u({ variables: { input: { walletId: e.fromWallet.id, paymentRequest: e.paymentRequest, amount: 100 * e.usdAmount, memo: e.memo } } }) } }) } }, 90191: function (e, t, n) { "use strict"; var r = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(158), s = a(n(6406)), l = a(n(66278)); t.default = function (e) { var t, n, a = (0, l.default)().refetch, u = r(i.useMutation.onChainPaymentSend({ onCompleted: function () { a() } }), 2), c = u[0], d = u[1], f = d.loading, h = d.data, v = d.errorsMessage, m = i.useQuery.onChainTxFee({ variables: { walletId: e.btcWalletId, address: e.address, amount: e.satAmount } }), p = m.loading, y = m.data, b = m.errorsMessage, g = { amount: null !== (n = null === (t = null == y ? void 0 : y.onChainTxFee) || void 0 === t ? void 0 : t.amount) && void 0 !== n ? n : void 0, currency: "SATS" }; return (0, o.jsx)(s.default, { loading: f || p, error: v || b, data: null == h ? void 0 : h.onChainPaymentSend, feeAmount: g, reset: e.reset, handleSend: function (t) { t.preventDefault(), c({ variables: { input: { walletId: e.btcWalletId, address: e.address, amount: e.satAmount, memo: e.memo } } }) } }) } }, 60341: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var i = n(85893), s = n(67294), l = n(69535), u = o(n(24218)); t.default = function () { var e = a((0, s.useState)("DEFAULT"), 2), t = e[0], n = e[1]; return (0, s.useEffect)((function () { var e = l.storage.get("colorTheme"); n(e && e in l.colorThemeLabels ? e : "DEFAULT") }), []), (0, i.jsxs)("div", r({ className: "setting" }, { children: [(0, i.jsx)("div", r({ className: "icon" }, { children: (0, i.jsx)(u.default, { name: "opacity" }) })), (0, i.jsxs)("div", r({ className: "name" }, { children: [(0, l.translate)("Color Theme"), (0, i.jsx)("div", r({ className: "sub" }, { children: (0, l.translate)(l.colorThemeLabels[t]) }))] })), (0, i.jsx)("div", r({ className: "action" }, { children: (0, i.jsx)("select", r({ name: "colorTheme", value: t, onChange: function (e) { var t = e.currentTarget.value; (0, l.setColorTheme)(t), n(t) } }, { children: Object.entries(l.colorThemeLabels).map((function (e) { var t = a(e, 2), n = t[0], o = t[1]; return (0, i.jsx)("option", r({ value: n }, { children: (0, l.translate)(o) }), n) })) })) }))] })) } }, 50061: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(69535), s = a(n(24218)); t.default = function (e) { var t = e.guestView, n = (0, i.useAuthContext)().authIdentity, a = null == n ? void 0 : n.emailAddress; return (0, o.jsxs)("div", r({ className: "setting" }, { children: [(0, o.jsx)("div", r({ className: "icon" }, { children: (0, o.jsx)(s.default, { name: "at" }) })), (0, o.jsxs)("div", r({ className: "name" }, { children: [(0, i.translate)("Email"), (0, o.jsx)("div", r({ className: "sub" }, { children: t ? "(not logged in)" : a }))] })), (0, o.jsx)("div", r({ className: "action" }, { children: (0, o.jsx)(s.default, { name: "lock" }) }))] })) } }, 59405: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var i = n(85893), s = n(158), l = o(n(66278)), u = n(69535), c = o(n(24218)), d = { DEFAULT: "Default (OS)", "en-US": "English", "es-SV": "Spanish" }; t.default = function (e) { var t = e.guestView, n = (0, l.default)().language, o = (0, u.useAppState)().defaultLanguage, f = a(s.useMutation.userUpdateLanguage({ onCompleted: function (e) { var t; (0, u.setLocale)((null === (t = null == e ? void 0 : e.userUpdateLanguage.user) || void 0 === t ? void 0 : t.language) || o) } }), 2), h = f[0], v = f[1].loading; return (0, i.jsxs)("div", r({ className: "setting" }, { children: [(0, i.jsx)("div", r({ className: "icon" }, { children: (0, i.jsx)(c.default, { name: "world" }) })), (0, i.jsxs)("div", r({ className: "name" }, { children: [(0, u.translate)("Language"), (0, i.jsx)("div", r({ className: "sub" }, { children: (0, u.translate)(d[n || "DEFAULT"]) }))] })), (0, i.jsx)("div", r({ className: "action" }, { children: (0, i.jsx)("select", r({ name: "language", value: n, onChange: function (e) { var t = e.currentTarget.value; h({ variables: { input: { language: t } } }) }, disabled: t || v }, { children: Object.entries(d).map((function (e) { var t = a(e, 2), n = t[0], o = t[1]; return (0, i.jsx)("option", r({ value: n }, { children: (0, u.translate)(o) }), n) })) })) }))] })) } }, 16018: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = a(n(21775)); t.default = function (e) { var t = e.children; return (0, o.jsxs)("div", r({ className: "settings" }, { children: [(0, o.jsx)(i.default, { page: "settings" }), t] })) } }, 91604: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var l = n(85893), u = n(158), c = n(62338), d = n(69535), f = s(n(66278)), h = s(n(24218)), v = function (e) { var t = e.lightningAddressDomain, n = i(u.useMutation.userUpdateUsername(), 2), s = n[0], f = n[1], v = f.loading, m = f.errorsMessage; return (0, l.jsxs)("div", r({ className: "setting" }, { children: [(0, l.jsx)("div", r({ className: "icon" }, { children: (0, l.jsx)(h.default, { name: "person" }) })), (0, l.jsxs)("div", r({ className: "name" }, { children: [(0, d.translate)("Set Lightning Address"), (0, l.jsx)("div", r({ className: "sub" }, { children: (0, d.translate)("You can do this operation ONLY one time") }))] })), (0, l.jsx)("div", r({ className: "action" }, { children: (0, l.jsxs)("form", r({ onSubmit: function (e) { return a(void 0, void 0, void 0, (function () { var t; return o(this, (function (n) { return e.preventDefault(), t = e.currentTarget.username, s({ variables: { input: { username: t.value } } }), [2] })) })) } }, { children: [(0, l.jsxs)("div", r({ className: "grouped-input-button" }, { children: [(0, l.jsxs)("div", r({ className: "input-label-right" }, { children: [(0, l.jsx)("input", { type: "text", name: "username", placeholder: (0, d.translate)("Username") }), (0, l.jsxs)("span", { children: ["@", t] })] })), (0, l.jsx)("button", r({ type: "submit", disabled: v }, { children: v ? (0, l.jsx)(c.Spinner, { size: "small" }) : (0, l.jsx)(h.default, { name: "submit" }) }))] })), m && (0, l.jsx)("div", r({ className: "error-hint" }, { children: m }))] })) }))] })) }; t.default = function (e) { var t = e.guestView, n = (0, f.default)(), a = n.username, o = n.lightningAddressDomain; if (!o) throw new Error("No lightningAddressDomain value"); return t || a ? (0, l.jsxs)("div", r({ className: "setting" }, { children: [(0, l.jsx)("div", r({ className: "icon" }, { children: (0, l.jsx)(h.default, { name: "person" }) })), (0, l.jsxs)("div", r({ className: "name" }, { children: [(0, d.translate)("Lightning Address"), (0, l.jsx)("div", r({ className: "sub" }, { children: t ? "(not logged in)" : "".concat(a, "@").concat(o) }))] })), (0, l.jsx)("div", r({ className: "action" }, { children: (0, l.jsx)(h.default, { name: "lock" }) }))] })) : (0, l.jsx)(v, { lightningAddressDomain: o }) } }, 4410: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, o = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.BLOCKCHAIN_EXPLORER_URL = void 0; var i = n(85893), s = n(67294), l = n(158), u = n(62338), c = n(69535), d = o(n(24218)); t.BLOCKCHAIN_EXPLORER_URL = "https://mempool.space/tx/"; var f = function (e) { switch (e) { case "SettlementViaOnChain": return "OnChain Payment"; case "SettlementViaLn": return "Lightning Payment"; case "SettlementViaIntraLedger": return "".concat(c.config.walletName, " Payment") } }, h = (0, l.formatForLocale)((0, c.getLocale)()), v = h.formatTime, m = h.formatRelativeTime; t.default = function (e) { var n = e.tx, o = a((0, s.useState)(!1), 2), h = o[0], p = o[1], y = "RECEIVE" === n.direction, b = "PENDING" === n.status, g = function (e) { var t = e.memo, n = e.direction, r = e.settlementVia; if (t) return t; var a = "RECEIVE" === n; switch (r.__typename) { case "SettlementViaOnChain": return "OnChain Payment"; case "SettlementViaLn": return "Lightning Payment"; case "SettlementViaIntraLedger": var o = r.counterPartyUsername || "".concat(c.config.walletName, " Wallet"); return a ? "".concat((0, c.translate)("From"), " ").concat(o) : "".concat((0, c.translate)("To"), " ").concat(o) } }(n), j = function (e) { var t = e.settlementAmount, n = e.settlementPrice, r = n.base, a = n.offset; return t * (r / Math.pow(10, a) / 100) }(n), x = function (e) { e.preventDefault(), p(!h) }, w = (0, i.jsx)(d.default, { name: y ? "receive" : "send" }); return h ? (0, i.jsxs)("div", r({ className: "transaction-item pending-".concat(b, " direction-").concat(n.direction.toLocaleLowerCase()) }, { children: [(0, i.jsxs)("div", r({ className: "transaction-summary", onClick: x }, { children: [(0, i.jsx)("div", r({ className: "icon" }, { children: w })), (0, i.jsxs)("div", r({ className: "content" }, { children: [(0, i.jsx)("div", r({ className: "description" }, { children: f(n.settlementVia.__typename) })), (0, i.jsx)("div", r({ className: "date" }, { children: v(n.createdAt) }))] })), (0, i.jsx)("div", r({ className: "amount" }, { children: "USD" === n.settlementCurrency ? (0, i.jsx)("div", r({ className: "usd-primary" }, { children: (0, l.formatUsd)(n.settlementAmount / 100) })) : (0, i.jsxs)("div", { children: [(0, i.jsx)(u.SatFormat, { amount: n.settlementAmount }), (0, i.jsx)("div", r({ className: "amount-seconddary" }, { children: (0, l.formatUsd)(j) }))] }) }))] })), (0, i.jsxs)("div", r({ className: "transaction-details pending_".concat(b) }, { children: [(0, i.jsxs)("div", { children: [(0, i.jsx)("div", r({ className: "label" }, { children: (0, c.translate)("Description") })), (0, i.jsx)("div", r({ className: "value" }, { children: g }))] }), !y && (0, i.jsxs)("div", { children: [(0, i.jsx)("div", r({ className: "label" }, { children: (0, c.translate)("Fee") })), (0, i.jsx)("div", r({ className: "value" }, { children: (0, i.jsx)(u.SatFormat, { amount: n.settlementFee }) }))] }), "SettlementViaIntraLedger" === n.settlementVia.__typename && (0, i.jsxs)("div", { children: [(0, i.jsx)("div", r({ className: "label" }, { children: (0, c.translate)(y ? "Received from" : "Sent to") })), (0, i.jsx)("div", r({ className: "value" }, { children: n.settlementVia.counterPartyUsername || "".concat(c.config.walletName, " Wallet") }))] }), "SettlementViaLn" === n.settlementVia.__typename && (0, i.jsxs)("div", { children: [(0, i.jsx)("div", r({ className: "label" }, { children: (0, c.translate)("Hash") })), (0, i.jsx)("div", r({ className: "value" }, { children: n.initiationVia.paymentHash }))] }), "SettlementViaOnChain" === n.settlementVia.__typename && (0, i.jsxs)("div", { children: [(0, i.jsx)("div", r({ className: "label" }, { children: (0, c.translate)("Hash") })), (0, i.jsx)("div", r({ className: "value" }, { children: (0, i.jsx)("a", r({ href: "".concat(t.BLOCKCHAIN_EXPLORER_URL).concat(n.settlementVia.transactionHash), target: "_blank", rel: "noreferrer" }, { children: n.settlementVia.transactionHash })) }))] }), n.id && (0, i.jsxs)("div", { children: [(0, i.jsx)("div", r({ className: "label" }, { children: "ID" })), (0, i.jsx)("div", r({ className: "value" }, { children: n.id }))] })] }))] })) : (0, i.jsx)("div", r({ className: "transaction-item pending-".concat(b, " direction-").concat(n.direction.toLocaleLowerCase()) }, { children: (0, i.jsxs)("div", r({ className: "transaction-summary", onClick: x }, { children: [(0, i.jsx)("div", r({ className: "icon" }, { children: w })), (0, i.jsxs)("div", r({ className: "content" }, { children: [(0, i.jsx)("div", r({ className: "description" }, { children: (0, l.truncatedDisplay)(null != g ? g : "") })), (0, i.jsx)("div", r({ className: "date" }, { children: m(n.createdAt) }))] })), (0, i.jsx)("div", r({ className: "amount" }, { children: "USD" === n.settlementCurrency ? (0, i.jsx)("div", r({ className: "usd-primary" }, { children: (0, l.formatUsd)(n.settlementAmount / 100) })) : (0, i.jsxs)("div", { children: [(0, i.jsx)(u.SatFormat, { amount: n.settlementAmount }), (0, i.jsx)("div", r({ className: "amount-seconddary" }, { children: (0, l.formatUsd)(j) }))] }) }))] })) })) } }, 84938: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, o = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }, i = this && this.__read || function (e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, a, o = n.call(e), i = []; try { for (; (void 0 === t || t-- > 0) && !(r = o.next()).done;)i.push(r.value) } catch (e) { a = { error: e } } finally { try { r && !r.done && (n = o.return) && n.call(o) } finally { if (a) throw a.error } } return i }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var l = n(85893), u = n(67294), c = n(158), d = n(62338), f = s(n(66278)), h = s(n(4410)), v = n(69535), m = { edges: null, pageInfo: { hasNextPage: !1, hasPreviousPage: !1 } }; t.default = function () { var e = (0, f.default)().transactions, t = i(c.useDelayedQuery.transactionList(), 2), n = t[0], s = t[1].loading, p = (0, u.useRef)(m); !p.current.edges && e && (p.current = e); var y = p.current, b = y.edges, g = y.pageInfo; return (0, l.jsxs)("div", r({ className: "transaction-list" }, { children: [0 === (null == b ? void 0 : b.length) && (0, l.jsx)("div", r({ className: "no-transactions" }, { children: (0, v.translate)("No transactions") })), null == b ? void 0 : b.map((function (e) { var t = null == e ? void 0 : e.node; return t ? (0, l.jsx)(h.default, { tx: t }, t.id) : null })), s ? (0, l.jsx)("div", r({ className: "load-more" }, { children: (0, l.jsx)(d.Spinner, {}) })) : g.hasNextPage && (0, l.jsx)("div", r({ className: "load-more link", onClick: function () { return a(void 0, void 0, void 0, (function () { var e, t, r, a, i, s, l; return o(this, (function (o) { switch (o.label) { case 0: return (e = p.current.pageInfo).hasNextPage ? [4, n({ first: 25, after: e.endCursor })] : [3, 2]; case 1: if (t = o.sent().data, !(r = null === (i = null === (a = null == t ? void 0 : t.me) || void 0 === a ? void 0 : a.defaultAccount) || void 0 === i ? void 0 : i.wallets[0].transactions) || !r.edges) return [2]; p.current = { edges: null === (l = null === (s = p.current) || void 0 === s ? void 0 : s.edges) || void 0 === l ? void 0 : l.concat(r.edges), pageInfo: r.pageInfo }, o.label = 2; case 2: return [2] } })) })) } }, { children: (0, v.translate)("Load more transactions") }))] })) } }, 55556: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = n(85893), i = n(158), s = n(62338), l = a(n(80378)), u = a(n(24218)), c = a(n(66278)), d = a(n(85346)); t.default = function () { var e = (0, c.default)(), t = e.btcWalletBalance, n = e.usdWalletBalance, a = e.wallets, f = (0, d.default)().satsToUsd; return a.length < 2 ? null : (0, o.jsxs)("div", r({ className: "wallets-header-container" }, { children: [(0, o.jsxs)("div", r({ className: "sats" }, { children: [(0, o.jsx)("div", r({ className: "label" }, { children: (0, o.jsx)("div", { children: "SAT" }) })), (0, o.jsxs)("div", r({ className: "balances" }, { children: [f && (0, o.jsx)("div", r({ className: "primary" }, { children: (0, i.formatUsd)(f(t)) })), (0, o.jsx)("div", r({ className: "secondary" }, { children: (0, o.jsx)(s.SatFormat, { amount: t }) }))] }))] })), (0, o.jsx)("div", r({ className: "divider" }, { children: (0, o.jsx)(l.default, r({ to: "/convert" }, { children: (0, o.jsx)(u.default, { name: "transfer" }) })) })), (0, o.jsxs)("div", r({ className: "usd" }, { children: [(0, o.jsx)("div", r({ className: "balances" }, { children: (0, o.jsx)("div", r({ className: "usd-balance" }, { children: (0, i.formatUsd)(n) })) })), (0, o.jsx)("div", r({ className: "label" }, { children: (0, o.jsx)("div", { children: "USD" }) }))] }))] })) } }, 66278: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); var r = n(158), a = n(69535); t.default = function () { var e, t, n, o, i, s, l, u, c, d, f, h, v, m, p, y, b, g, j = (0, a.useAuthContext)().isAuthenticated, x = (0, a.useAppState)().defaultLanguage, w = r.useQuery.main({ variables: { isAuthenticated: j, recentTransactions: 5 }, onCompleted: function (e) { var t, n; (0, a.setLocale)(null !== (n = null === (t = null == e ? void 0 : e.me) || void 0 === t ? void 0 : t.language) && void 0 !== n ? n : x) } }), _ = w.data, N = w.refetch, S = null !== (n = null === (t = null === (e = null == _ ? void 0 : _.globals) || void 0 === e ? void 0 : e.nodesIds) || void 0 === t ? void 0 : t[0]) && void 0 !== n ? n : "", O = null === (o = null == _ ? void 0 : _.globals) || void 0 === o ? void 0 : o.lightningAddressDomain, C = null !== (i = null == _ ? void 0 : _.btcPrice) && void 0 !== i ? i : void 0, P = null == _ ? void 0 : _.me, A = null !== (u = null === (l = null === (s = null == _ ? void 0 : _.me) || void 0 === s ? void 0 : s.defaultAccount) || void 0 === l ? void 0 : l.wallets) && void 0 !== u ? u : [], k = null === (d = null === (c = null == _ ? void 0 : _.me) || void 0 === c ? void 0 : c.defaultAccount) || void 0 === d ? void 0 : d.defaultWalletId, T = null == A ? void 0 : A.find((function (e) { return (null == e ? void 0 : e.id) === k })), M = null === (h = null === (f = null == P ? void 0 : P.defaultAccount) || void 0 === f ? void 0 : f.wallets) || void 0 === h ? void 0 : h.find((function (e) { return "BTCWallet" === (null == e ? void 0 : e.__typename) })), I = null == M ? void 0 : M.id, U = j ? null !== (v = null == M ? void 0 : M.balance) && void 0 !== v ? v : NaN : 0, D = null === (m = null == P ? void 0 : P.defaultAccount) || void 0 === m ? void 0 : m.transactions, E = null === (y = null === (p = null == P ? void 0 : P.defaultAccount) || void 0 === p ? void 0 : p.wallets) || void 0 === y ? void 0 : y.find((function (e) { return "UsdWallet" === (null == e ? void 0 : e.__typename) })), F = null == E ? void 0 : E.id, L = j ? null !== (b = null == E ? void 0 : E.balance) && void 0 !== b ? b : NaN : 0, R = null == P ? void 0 : P.username, B = null == P ? void 0 : P.phone, W = null !== (g = null == P ? void 0 : P.language) && void 0 !== g ? g : "DEFAULT"; return { lightningAddressDomain: O, btcPrice: C, pubKey: S, refetch: N, wallets: A, defaultWallet: T, defaultWalletId: k, btcWallet: M, btcWalletId: I, btcWalletBalance: U, usdWallet: E, usdWalletId: F, usdWalletBalance: L / 100, transactions: D, username: R, phoneNumber: B, language: W } } }, 85346: function (e, t, n) { "use strict"; var r = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var a = n(158), o = n(67294), i = r(n(66278)), s = function (e) { if (!e) return NaN; var t = e.base, n = e.offset; return t / Math.pow(10, n) }; t.default = function () { var e, t, n, r, l, u, c, d, f = (0, o.useRef)(null), h = (0, o.useRef)(null), v = (0, o.useRef)(null), m = (0, a.PriceCacheStore)(), p = (0, i.default)().btcPrice, y = (0, o.useRef)(null !== (e = m.read()) && void 0 !== e ? e : NaN), b = function (e) { y.current !== e && (m.write(e), y.current = e) }, g = a.useSubscription.myUpdates().data; if (Number.isNaN(y.current) && p && b(s(p)), null === (t = null == g ? void 0 : g.myUpdates) || void 0 === t ? void 0 : t.update) { var j = g.myUpdates.update.type; "Price" === j && b(s(g.myUpdates.update)), "IntraLedgerUpdate" === j && (f.current = g.myUpdates.update), "LnUpdate" === j && (h.current = g.myUpdates.update), "OnChainUpdate" === j && (v.current = g.myUpdates.update) } var x = null !== (d = null === (c = null === (u = null === (l = null === (r = null === (n = null == g ? void 0 : g.myUpdates) || void 0 === n ? void 0 : n.me) || void 0 === r ? void 0 : r.defaultAccount) || void 0 === l ? void 0 : l.wallets) || void 0 === u ? void 0 : u[0]) || void 0 === c ? void 0 : c.balance) && void 0 !== d ? d : NaN; return { usdPerBtc: (0, o.useMemo)((function () { return Number.isNaN(y.current) ? null : 1e8 * y.current / 100 }), [y.current]), satsToUsd: (0, o.useMemo)((function () { return Number.isNaN(y.current) ? null : function (e) { return e * y.current / 100 } }), [y.current]), usdToSats: (0, o.useMemo)((function () { return Number.isNaN(y.current) ? null : function (e) { return 100 * e / y.current } }), [y.current]), currentBalance: x, intraLedgerUpdate: f.current, lnUpdate: h.current, onChainUpdate: v.current } } }, 19711: function (e, t) { "use strict"; var n = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, r = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.handleFlowError = void 0, t.handleFlowError = function (e) { var t = e.history, a = e.resetFlow; return function (e) { return n(void 0, void 0, void 0, (function () { var n, o, i, s, l, u; return r(this, (function (r) { switch (r.label) { case 0: switch (console.debug("[Kratos error]", e, null === (n = e.response) || void 0 === n ? void 0 : n.data.error), null === (i = null === (o = e.response) || void 0 === o ? void 0 : o.data.error) || void 0 === i ? void 0 : i.id) { case "session_aal2_required": return [3, 1]; case "session_already_available": return [3, 2]; case "session_refresh_required": return [3, 4]; case "self_service_flow_return_to_forbidden": return [3, 5]; case "self_service_flow_expired": return [3, 6]; case "security_csrf_violation": return [3, 7]; case "security_identity_mismatch": return [3, 8]; case "browser_location_change_required": return [3, 9] }return [3, 10]; case 1: return window.location.href = null === (s = e.response) || void 0 === s ? void 0 : s.data.redirect_browser_to, [2]; case 2: return [4, t.push("/")]; case 3: return r.sent(), [2]; case 4: return window.location.href = null === (l = e.response) || void 0 === l ? void 0 : l.data.redirect_browser_to, [2]; case 5: case 6: case 7: case 8: return a(), [2]; case 9: return window.location.href = e.response.data.redirect_browser_to, [2]; case 10: return 410 === (null === (u = e.response) || void 0 === u ? void 0 : u.status) ? (a(), [2]) : [2, Promise.reject(e)] } })) })) } } }, 97691: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.getNodesForFlow = t.getUrlForFlow = t.KratosFlow = t.isQuerySet = void 0, t.isQuerySet = function (e) { return "string" == typeof e && e.length > 0 }, t.KratosFlow = { Registration: "registration", Login: "login", Recovery: "recovery", Logout: "logout" }, t.getUrlForFlow = function (e) { var t, n = e.flow, r = e.kratosBrowserUrl, a = e.query; return "".concat((t = r, t.replace(/\/$/u, "")), "/self-service/").concat(n, "/browser").concat(a ? "?".concat(a.toString()) : "") }, t.getNodesForFlow = function (e) { var t; return null === (t = null == e ? void 0 : e.ui) || void 0 === t ? void 0 : t.nodes.reduce((function (e, t) { return e[t.attributes.name] = t, e }), {}) } }, 812: function (e, t, n) { "use strict"; var r = this && this.__createBinding || (Object.create ? function (e, t, n, r) { void 0 === r && (r = n); var a = Object.getOwnPropertyDescriptor(t, n); a && !("get" in a ? !t.__esModule : a.writable || a.configurable) || (a = { enumerable: !0, get: function () { return t[n] } }), Object.defineProperty(e, r, a) } : function (e, t, n, r) { void 0 === r && (r = n), e[r] = t[n] }), a = this && this.__exportStar || function (e, t) { for (var n in e) "default" === n || Object.prototype.hasOwnProperty.call(t, n) || r(t, e, n) }; Object.defineProperty(t, "__esModule", { value: !0 }), a(n(5368), t), a(n(19711), t), a(n(97691), t), a(n(16775), t) }, 16775: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.KratosSdk = void 0; var r = n(14352); t.KratosSdk = function (e) { return void 0 === e && (e = process.env.KRATOS_API_URL), new r.V0alpha2Api(new r.Configuration({ basePath: e })) } }, 5368: function (e, t, n) { "use strict"; var r = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, a = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.handleLogout = t.handleWhoAmI = t.handleRecovery = t.handleLogin = t.handleRegister = void 0; var o = n(16775), i = n(97691); t.handleRegister = function (e, t) { return r(void 0, void 0, void 0, (function () { var n, r, s, l, u, c, d; return a(this, (function (a) { switch (a.label) { case 0: if (n = e.query, r = n.flow, s = n.return_to, l = void 0 === s ? "" : s, u = (0, i.getUrlForFlow)({ flow: i.KratosFlow.Registration, kratosBrowserUrl: t, query: new URLSearchParams({ return_to: l.toString() }) }), !(0, i.isQuerySet)(r)) return [2, { redirect: !0, redirectTo: u }]; a.label = 1; case 1: return a.trys.push([1, 3, , 4]), [4, (0, o.KratosSdk)().getSelfServiceRegistrationFlow(r, e.header("Cookie"))]; case 2: return [2, { redirect: !1, flowData: { registrationData: a.sent().data } }]; case 3: switch (c = a.sent(), null === (d = null == c ? void 0 : c.response) || void 0 === d ? void 0 : d.status) { case 410: case 404: case 403: return [2, { redirect: !0, redirectTo: u }]; default: throw c }return [3, 4]; case 4: return [2] } })) })) }, t.handleLogin = function (e, t) { return r(void 0, void 0, void 0, (function () { var n, r, s, l, u, c, d; return a(this, (function (a) { switch (a.label) { case 0: if (n = e.query, r = n.flow, s = n.return_to, l = void 0 === s ? "" : s, u = (0, i.getUrlForFlow)({ flow: i.KratosFlow.Login, kratosBrowserUrl: t, query: new URLSearchParams({ return_to: l.toString() }) }), !(0, i.isQuerySet)(r)) return [2, { redirect: !0, redirectTo: u }]; a.label = 1; case 1: return a.trys.push([1, 3, , 4]), [4, (0, o.KratosSdk)().getSelfServiceLoginFlow(r, e.header("Cookie"), { withCredentials: !0 })]; case 2: return [2, { redirect: !1, flowData: { loginData: a.sent().data } }]; case 3: switch (c = a.sent(), null === (d = null == c ? void 0 : c.response) || void 0 === d ? void 0 : d.status) { case 410: case 404: case 403: return [2, { redirect: !0, redirectTo: u }]; default: throw c }return [3, 4]; case 4: return [2] } })) })) }, t.handleRecovery = function (e, t) { return r(void 0, void 0, void 0, (function () { var n, r, s, l, u, c, d; return a(this, (function (a) { switch (a.label) { case 0: if (n = e.query, r = n.flow, s = n.return_to, l = void 0 === s ? "" : s, u = (0, i.getUrlForFlow)({ flow: i.KratosFlow.Recovery, kratosBrowserUrl: t, query: new URLSearchParams({ return_to: l.toString() }) }), !(0, i.isQuerySet)(r)) return [2, { redirect: !0, redirectTo: u }]; a.label = 1; case 1: return a.trys.push([1, 3, , 4]), [4, (0, o.KratosSdk)().getSelfServiceRecoveryFlow(r, e.header("Cookie"))]; case 2: return [2, { redirect: !1, flowData: { recoveryData: a.sent().data } }]; case 3: switch (c = a.sent(), null === (d = null == c ? void 0 : c.response) || void 0 === d ? void 0 : d.status) { case 410: case 404: case 403: return [2, { redirect: !0, redirectTo: u }]; default: throw c }return [3, 4]; case 4: return [2] } })) })) }, t.handleWhoAmI = function (e) { return r(void 0, void 0, void 0, (function () { var t, n; return a(this, (function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), [4, (0, o.KratosSdk)().toSession(void 0, e.header("Cookie"))]; case 1: return [2, r.sent().data]; case 2: if (t = r.sent(), 401 === (null === (n = null == t ? void 0 : t.response) || void 0 === n ? void 0 : n.status)) return [2, void 0]; throw t; case 3: return [2] } })) })) }, t.handleLogout = function (e) { return r(void 0, void 0, void 0, (function () { var t, n; return a(this, (function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), [4, (0, o.KratosSdk)().createSelfServiceLogoutFlowUrlForBrowsers(e.header("Cookie"))]; case 1: return [2, { redirectTo: r.sent().data.logout_url }]; case 2: if (t = r.sent(), 401 === (null === (n = null == t ? void 0 : t.response) || void 0 === n ? void 0 : n.status)) return [2, { redirectTo: "/" }]; throw t; case 3: return [2] } })) })) } }, 55966: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__createBinding || (Object.create ? function (e, t, n, r) { void 0 === r && (r = n); var a = Object.getOwnPropertyDescriptor(t, n); a && !("get" in a ? !t.__esModule : a.writable || a.configurable) || (a = { enumerable: !0, get: function () { return t[n] } }), Object.defineProperty(e, r, a) } : function (e, t, n, r) { void 0 === r && (r = n), e[r] = t[n] }), o = this && this.__setModuleDefault || (Object.create ? function (e, t) { Object.defineProperty(e, "default", { enumerable: !0, value: t }) } : function (e, t) { e.default = t }), i = this && this.__importStar || function (e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var n in e) "default" !== n && Object.prototype.hasOwnProperty.call(e, n) && a(t, e, n); return o(t, e), t }, s = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }); var l = n(85893); n(34505); var u = i(n(20745)), c = n(35800), d = s(n(19539)), f = s(n(58274)), h = n(69535), v = document.getElementById("root"); if (!v) throw new Error("HTML_ROOT_ELEMENT_IS_MISSING"); (0, h.setColorThemeFromStorage)(), u.createRoot(v).render((0, l.jsx)(c.ErrorBoundary, r({ FallbackComponent: f.default }, { children: (0, l.jsx)(d.default, { GwwState: window.__G_DATA.GwwState }) }))) }, 46570: function (e, t, n) { "use strict"; var r = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.routeRequiresAuth = t.authRoutes = t.checkAuthRoute = t.appRoutes = t.checkRoute = void 0; var a = n(69535), o = r(n(88459)), i = r(n(65829)), s = r(n(29112)), l = r(n(6974)), u = r(n(98807)), c = r(n(78215)), d = r(n(21277)), f = r(n(6278)), h = r(n(97380)), v = r(n(18359)), m = r(n(10021)), p = { "/": { component: i.default, title: "".concat(a.config.walletName, " Web Wallet") }, "/convert": { component: m.default, title: "Convert BTC <> USD" }, "/send": { component: f.default, title: "Send Bitcoin" }, "/scan": { component: f.default, title: "Send Bitcoin" }, "/receive": { component: u.default, title: "Receive Bitcoin" }, "/contacts": { component: o.default, title: "Contacts" }, "/transactions": { component: v.default, title: "Transactions with Contact" }, "/settings": { component: h.default, title: "Settings" } }; a.config.kratosFeatureFlag || (p["/login"] = { component: l.default, title: "Login to ".concat(a.config.walletName, " Web Wallet") }), t.checkRoute = function (e) { return p[e] ? e : new Error("Invalid route path") }, t.appRoutes = p; var y = { "/register": { component: d.default, title: "Create new account for ".concat(a.config.walletName, " Web Wallet") }, "/login": { component: s.default, title: "Login to ".concat(a.config.walletName, " Web Wallet") }, "/recovery": { component: c.default, title: "Recover your ".concat(a.config.walletName, " Web Wallet") } }; t.checkAuthRoute = function (e) { return y[e] ? e : new Error("Invalid auth route path") }, t.authRoutes = y; var b = []; t.routeRequiresAuth = function (e) { return b.includes(e) } }, 77074: function (e, t) { "use strict"; var n = this && this.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))((function (a, o) { function i(e) { try { l(r.next(e)) } catch (e) { o(e) } } function s(e) { try { l(r.throw(e)) } catch (e) { o(e) } } function l(e) { var t; e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n((function (e) { e(t) }))).then(i, s) } l((r = r.apply(e, t || [])).next()) })) }, r = this && this.__generator || function (e, t) { var n, r, a, o, i = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; i;)try { if (n = 1, r && (a = 2 & o[0] ? r.return : o[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, o[1])).done) return a; switch (r = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return i.label++, { value: o[1], done: !1 }; case 5: i.label++, r = o[1], o = [0]; continue; case 7: o = i.ops.pop(), i.trys.pop(); continue; default: if (!((a = (a = i.trys).length > 0 && a[a.length - 1]) || 6 !== o[0] && 2 !== o[0])) { i = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { i.label = o[1]; break } if (6 === o[0] && i.label < a[1]) { i.label = a[1], a = o; break } if (a && i.label < a[2]) { i.label = a[2], i.ops.push(o); break } a[2] && i.ops.pop(), i.trys.pop(); continue }o = t.call(e, i) } catch (e) { o = [6, e], r = 0 } finally { n = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.ajax = void 0, t.ajax = { get: function (e, t) { return n(void 0, void 0, void 0, (function () { var n; return r(this, (function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), n = new URL(e), t && (n.search = new URLSearchParams(JSON.stringify(t)).toString()), [4, fetch(n.toString(), { method: "get", credentials: "include", headers: { "Content-Type": "application/json" } })]; case 1: return [2, r.sent().json()]; case 2: return [2, r.sent()]; case 3: return [2] } })) })) }, post: function (e, t) { return void 0 === t && (t = {}), n(void 0, void 0, void 0, (function () { return r(this, (function (n) { switch (n.label) { case 0: return n.trys.push([0, 2, , 3]), [4, fetch(e, { method: "post", body: JSON.stringify(t), credentials: "include", headers: { "Content-Type": "application/json" } })]; case 1: return [2, n.sent().json()]; case 2: return [2, n.sent()]; case 3: return [2] } })) })) } } }, 88174: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.useAuthContext = t.AuthContext = void 0; var r = n(67294); t.AuthContext = (0, r.createContext)({ isAuthenticated: !1, setAuthSession: function () { }, syncSession: function () { return Promise.resolve(!0) } }), t.useAuthContext = function () { return (0, r.useContext)(t.AuthContext) } }, 97560: function (e, t) { "use strict"; var n, r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.publicConfig = t.config = void 0; var a, o = "undefined" != typeof window; if (!o) { var i = ["NODE_ENV", "NODE_PATH", "SESSION_KEYS", "WALLET_NAME", "SHARE_URL", "HOST", "PORT", "SUPPORT_EMAIL", "GRAPHQL_URL", "GRAPHQL_SUBSCRIPTION_URL", "AUTH_ENDPOINT"]; if ("true" === process.env.KRATOS_FEATURE_FLAG && i.push("KRATOS_API_URL", "KRATOS_BROWSER_URL", "GALOY_AUTH_ENDPOINT"), i.forEach((function (e) { if (!process.env[e]) throw new Error("Missing env var: ".concat(e)) })), process.env.NETWORK && !["mainnet", "testnet", "signet", "regtest"].includes(process.env.NETWORK)) throw new Error("Invalid NETWORK value") } t.config = o ? r({ isBrowser: o }, window.__G_DATA.GwwConfig) : { isDev: !1, isBrowser: o, walletName: process.env.WALLET_NAME, shareUrl: process.env.SHARE_URL, sessionKeys: process.env.SESSION_KEYS, host: process.env.HOST, port: Number(process.env.PORT), supportEmail: process.env.SUPPORT_EMAIL, network: null !== (n = process.env.NETWORK) && void 0 !== n ? n : (a = process.env.GRAPHQL_URL, a.match("mainnet") ? "mainnet" : a.match("signet") ? "signet" : a.match("testnet") ? "testnet" : "regtest"), graphqlUrl: process.env.GRAPHQL_URL, graphqlSubscriptionUrl: process.env.GRAPHQL_SUBSCRIPTION_URL, authEndpoint: process.env.AUTH_ENDPOINT, kratosFeatureFlag: Boolean("true" === process.env.KRATOS_FEATURE_FLAG || !1), kratosBrowserUrl: process.env.KRATOS_BROWSER_URL, galoyAuthEndpoint: process.env.GALOY_AUTH_ENDPOINT }, t.publicConfig = Object.fromEntries(["walletName", "supportEmail", "shareUrl", "graphqlUrl", "graphqlSubscriptionUrl", "network", "authEndpoint", "kratosFeatureFlag", "kratosBrowserUrl", "galoyAuthEndpoint"].map((function (e) { return [e, t.config[e]] }))) }, 39547: function (e, t, n) { "use strict"; var r = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.helmetConfig = void 0; var a = r(n(65220)); t.helmetConfig = (0, a.default)({ contentSecurityPolicy: { directives: { defaultSrc: ["'self'"], scriptSrc: ["'self'", "'unsafe-inline'", "https:"], connectSrc: ["'self'", "*"], imgSrc: ["'self'", "data:", "https:"] } }, crossOriginEmbedderPolicy: !1 }) }, 97563: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.history = void 0; var r = n(47323), a = n(97560); t.history = a.config.isBrowser ? (0, r.createBrowserHistory)() : (0, r.createMemoryHistory)() }, 69535: function (e, t, n) { "use strict"; var r = this && this.__createBinding || (Object.create ? function (e, t, n, r) { void 0 === r && (r = n); var a = Object.getOwnPropertyDescriptor(t, n); a && !("get" in a ? !t.__esModule : a.writable || a.configurable) || (a = { enumerable: !0, get: function () { return t[n] } }), Object.defineProperty(e, r, a) } : function (e, t, n, r) { void 0 === r && (r = n), e[r] = t[n] }), a = this && this.__exportStar || function (e, t) { for (var n in e) "default" === n || Object.prototype.hasOwnProperty.call(t, n) || r(t, e, n) }; Object.defineProperty(t, "__esModule", { value: !0 }), a(n(77074), t), a(n(88174), t), a(n(97560), t), a(n(39547), t), a(n(97563), t), a(n(3124), t), a(n(32446), t), a(n(3916), t), a(n(71966), t), a(n(47125), t), a(n(13151), t) }, 3124: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.storage = void 0; var r = n(97560); t.storage = { get: function (e) { if (r.config.isBrowser && window.localStorage) return window.localStorage.getItem("galoy:" + e) }, delete: function (e) { r.config.isBrowser && window.localStorage && window.localStorage.removeItem("galoy:" + e) }, set: function (e, t) { r.config.isBrowser && window.localStorage && (void 0 === t ? window.localStorage.removeItem("galoy:" + e) : window.localStorage.setItem("galoy:" + e, t.toString())) } } }, 32446: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.createAdminClient = t.createClient = t.useAppDispatcher = t.useAppState = t.GwwContext = void 0; var r = n(67294), a = n(158), o = n(97560); t.GwwContext = (0, r.createContext)({ state: { key: 0, path: "/" }, dispatch: function (e) { } }), t.useAppState = function () { return (0, r.useContext)(t.GwwContext).state }, t.useAppDispatcher = function () { return (0, r.useContext)(t.GwwContext).dispatch }, t.createClient = o.config.isBrowser ? (0, a.createGaloyClient)({ config: o.config }) : (0, a.createGaloyServerClient)({ config: o.config }), t.createAdminClient = (0, a.createGaloyServerAdminClient)({ config: o.config }) }, 3916: function (e, t) { "use strict"; var n = this && this.__assign || function () { return n = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, n.apply(this, arguments) }, r = this && this.__rest || function (e, t) { var n = {}; for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]); if (null != e && "function" == typeof Object.getOwnPropertySymbols) { var a = 0; for (r = Object.getOwnPropertySymbols(e); a < r.length; a++)t.indexOf(r[a]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[a]) && (n[r[a]] = e[r[a]]) } return n }; Object.defineProperty(t, "__esModule", { value: !0 }), t.mainReducer = void 0, t.mainReducer = function (e, t) { var a, o = t.type, i = r(t, ["type"]); switch (o) { case "update": return n(n(n({}, e), i), { key: Math.random() }); case "navigate": return n(n({}, e), { path: null !== (a = i.path) && void 0 !== a ? a : "/", key: Math.random() }); case "kratos-login": return n(n({}, e), { authIdentity: i.authIdentity }); default: throw new Error("UNSUPPORTED_ACTION") } } }, 71966: (e, t, n) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.setColorTheme = t.setColorThemeFromStorage = t.setDefaultColorTheme = t.setColorThemeClass = t.colorThemeLabels = void 0; var r = n(3124); t.colorThemeLabels = { DEFAULT: "Default (OS)", dark: "Dark mode", light: "Light mode" }, t.setColorThemeClass = function (e) { document.body.classList.remove("dark", "light"), document.body.classList.add(e) }, t.setDefaultColorTheme = function () { var e = window.matchMedia("(prefers-color-scheme: dark)"), n = e.matches ? "dark" : "light"; (0, t.setColorThemeClass)(n), e.onchange = function (e) { (0, t.setColorThemeClass)(e.matches ? "dark" : "light") } }, t.setColorThemeFromStorage = function () { var e = r.storage.get("colorTheme"), n = e && ["dark", "light"].includes(e) ? e : void 0; return n ? (0, t.setColorThemeClass)(n) : (0, t.setDefaultColorTheme)() }, t.setColorTheme = function (e) { "DEFAULT" === e ? (r.storage.set("colorTheme", void 0), (0, t.setDefaultColorTheme)()) : (r.storage.set("colorTheme", e), (0, t.setColorThemeClass)(e)) } }, 47125: function (e, t, n) { "use strict"; var r = this && this.__assign || function () { return r = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var a in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]); return e }, r.apply(this, arguments) }, a = this && this.__importDefault || function (e) { return e && e.__esModule ? e : { default: e } }; Object.defineProperty(t, "__esModule", { value: !0 }), t.toLocaleNumber = t.getLocale = t.setLocale = t.translateUnknown = t.translate = void 0; var o = a(n(86013)), i = n(158); o.default.fallbacks = !0, o.default.translations = { es: i.LANG_ES_MAIN }, t.translate = function (e, t) { return o.default.t(e, r({ defaultValue: e }, t)) }, t.translateUnknown = function (e, t) { return o.default.t(e, r({ defaultValue: e }, t)) }, t.setLocale = function (e) { e && "DEFAULT" !== e && o.default.locale !== e && (o.default.locale = e) }, t.getLocale = function () { return o.default.locale }; var s = n(86013); Object.defineProperty(t, "toLocaleNumber", { enumerable: !0, get: function () { return s.toNumber } }) }, 13151: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }) }, 46601: () => { }, 89214: () => { }, 52361: () => { }, 94616: () => { } }, a = {}; function o(e) { var t = a[e]; if (void 0 !== t) return t.exports; var n = a[e] = { id: e, loaded: !1, exports: {} }; return r[e].call(n.exports, n, n.exports, o), n.loaded = !0, n.exports } o.m = r, e = [], o.O = (t, n, r, a) => { if (!n) { var i = 1 / 0; for (c = 0; c < e.length; c++) { for (var [n, r, a] = e[c], s = !0, l = 0; l < n.length; l++)(!1 & a || i >= a) && Object.keys(o.O).every((e => o.O[e](n[l]))) ? n.splice(l--, 1) : (s = !1, a < i && (i = a)); if (s) { e.splice(c--, 1); var u = r(); void 0 !== u && (t = u) } } return t } a = a || 0; for (var c = e.length; c > 0 && e[c - 1][2] > a; c--)e[c] = e[c - 1]; e[c] = [n, r, a] }, o.n = e => { var t = e && e.__esModule ? () => e.default : () => e; return o.d(t, { a: t }), t }, n = Object.getPrototypeOf ? e => Object.getPrototypeOf(e) : e => e.__proto__, o.t = function (e, r) { if (1 & r && (e = this(e)), 8 & r) return e; if ("object" == typeof e && e) { if (4 & r && e.__esModule) return e; if (16 & r && "function" == typeof e.then) return e } var a = Object.create(null); o.r(a); var i = {}; t = t || [null, n({}), n([]), n(n)]; for (var s = 2 & r && e; "object" == typeof s && !~t.indexOf(s); s = n(s))Object.getOwnPropertyNames(s).forEach((t => i[t] = () => e[t])); return i.default = () => e, o.d(a, i), a }, o.d = (e, t) => { for (var n in t) o.o(t, n) && !o.o(e, n) && Object.defineProperty(e, n, { enumerable: !0, get: t[n] }) }, o.g = function () { if ("object" == typeof globalThis) return globalThis; try { return this || new Function("return this")() } catch (e) { if ("object" == typeof window) return window } }(), o.hmd = e => ((e = Object.create(e)).children || (e.children = []), Object.defineProperty(e, "exports", { enumerable: !0, set: () => { throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: " + e.id) } }), e), o.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t), o.r = e => { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, o.nmd = e => (e.paths = [], e.children || (e.children = []), e), (() => { var e = { 179: 0 }; o.O.j = t => 0 === e[t]; var t = (t, n) => { var r, a, [i, s, l] = n, u = 0; if (i.some((t => 0 !== e[t]))) { for (r in s) o.o(s, r) && (o.m[r] = s[r]); if (l) var c = l(o) } for (t && t(n); u < i.length; u++)a = i[u], o.o(e, a) && e[a] && e[a][0](), e[a] = 0; return o.O(c) }, n = self.webpackChunkweb_wallet = self.webpackChunkweb_wallet || []; n.forEach(t.bind(null, 0)), n.push = t.bind(null, n.push.bind(n)) })(); var i = o.O(void 0, [736], (() => o(55966))); i = o.O(i) })();